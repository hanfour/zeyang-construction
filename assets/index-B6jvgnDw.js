import{r,B as le,V as c,j as e,l as ie,A as N,k as z,F as ne,_ as h}from"./index-By57yhN3.js";import{c as p}from"./contact.service-vAsoKIKo.js";import{a as de,F as B}from"./TrashIcon-DAMfXNnH.js";import{F as I}from"./CheckCircleIcon-FQWdJK1s.js";function ce({title:i,titleId:d,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":d},l),i?r.createElement("title",{id:d},i):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const U=r.forwardRef(ce);function oe({title:i,titleId:d,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":d},l),i?r.createElement("title",{id:d},i):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const me=r.forwardRef(oe);function xe({title:i,titleId:d,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":d},l),i?r.createElement("title",{id:d},i):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 9v.906a2.25 2.25 0 0 1-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 0 0 1.183 1.981l6.478 3.488m8.839 2.51-4.66-2.51m0 0-1.023-.55a2.25 2.25 0 0 0-2.134 0l-1.022.55m0 0-4.661 2.51m16.5 1.615a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V8.844a2.25 2.25 0 0 1 1.183-1.981l7.5-4.039a2.25 2.25 0 0 1 2.134 0l7.5 4.039a2.25 2.25 0 0 1 1.183 1.98V19.5Z"}))}const he=r.forwardRef(xe);function pe({title:i,titleId:d,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":d},l),i?r.createElement("title",{id:d},i):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const ge=r.forwardRef(pe);function ue({title:i,titleId:d,...l},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":d},l),i?r.createElement("title",{id:d},i):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const fe=r.forwardRef(ue),ke=()=>{const[i,d]=le(),[l,n]=r.useState([]),[$,O]=r.useState(!0),[E,W]=r.useState(1),[y,Z]=r.useState(1),[w,P]=r.useState(""),[u,k]=r.useState("all"),[o,b]=r.useState([]),[t,f]=r.useState(null),[ye,be]=r.useState([]),[j,M]=r.useState(""),[m,C]=r.useState(null),[S,L]=r.useState(""),[_,F]=r.useState(""),[H,R]=r.useState(!1),[g,V]=r.useState([]);r.useEffect(()=>{const s={page:Number(i.get("page"))||1,search:i.get("search")||void 0,is_read:i.get("status")==="unread"?!1:void 0,is_replied:i.get("status")==="replied"?!0:void 0};Z(s.page||1),P(s.search||""),i.get("status")==="unread"?k("unread"):i.get("status")==="replied"?k("replied"):k("all"),q(s)},[i]);const q=async s=>{try{O(!0);const a=await p.getContacts({...s,limit:20,orderBy:"created_at",orderDir:"DESC"});a.success&&a.data&&(n(a.data.items),W(a.data.pagination.pages))}catch(a){c.error("無法載入聯絡表單"),console.error("Contacts fetch error:",a)}finally{O(!1)}},v=s=>{const a=new URLSearchParams,x={page:y,search:w,status:u==="all"?void 0:u,...s};Object.entries(x).forEach(([ae,D])=>{D&&D!==""&&a.set(ae,String(D))}),d(a)},G=s=>{s.preventDefault(),v({search:w,page:1})},A=s=>{k(s),v({status:s,page:1})},J=async s=>{if(f(s),M(s.notes||""),!s.is_read)try{await p.markAsRead(s.id),n(l.map(a=>a.id===s.id?{...a,is_read:!0}:a))}catch(a){console.error("Failed to mark as read:",a)}},K=async()=>{if(t)try{await p.updateNotes(t.id,j),c.success("備註已更新"),n(l.map(s=>s.id===t.id?{...s,notes:j}:s)),f({...t,notes:j})}catch{c.error("更新備註失敗")}},Q=s=>{C(s),L(""),F("")},X=async()=>{if(!m||!S.trim()){c.error("請輸入回覆內容");return}try{await p.replyToContact(m.id,{message:S,notes:_}),c.success("回覆已發送"),n(l.map(s=>s.id===m.id?{...s,is_replied:!0,replied_at:new Date().toISOString(),notes:_||s.notes}:s)),(t==null?void 0:t.id)===m.id&&f({...t,is_replied:!0,replied_at:new Date().toISOString(),notes:_||t.notes}),C(null),L(""),F("")}catch(s){c.error("發送回覆失敗"),console.error("Reply error:",s)}},Y=async s=>{try{await p.markAsReplied(s),c.success("已標記為已回覆"),n(l.map(a=>a.id===s?{...a,is_replied:!0,replied_at:new Date().toISOString()}:a)),(t==null?void 0:t.id)===s&&f({...t,is_replied:!0,replied_at:new Date().toISOString()})}catch(a){console.error("Mark as replied error:",a),c.error(`操作失敗: ${a instanceof Error?a.message:"未知錯誤"}`)}},T=s=>{V(s),R(!0)},ee=async()=>{try{g.length===1?await p.deleteContact(g[0]):await p.bulkDelete(g),c.success(`已封存 ${g.length} 個聯絡表單`),n(l.filter(s=>!g.includes(s.id))),b([]),t&&g.includes(t.id)&&f(null)}catch{c.error("封存失敗")}finally{R(!1),V([])}},se=async()=>{if(o.length!==0)try{await p.bulkMarkAsRead(o),c.success(`已將 ${o.length} 個表單標記為已讀`),n(l.map(s=>o.includes(s.id)?{...s,is_read:!0}:s)),b([])}catch{c.error("操作失敗")}},te=async()=>{try{const s=await p.exportContacts({is_read:u==="unread"?!1:void 0,is_replied:u==="replied"?!0:void 0,search:w||void 0}),a=window.URL.createObjectURL(s),x=document.createElement("a");x.href=a,x.download=`contacts-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(x),x.click(),document.body.removeChild(x),window.URL.revokeObjectURL(a),c.success("匯出成功")}catch{c.error("匯出失敗")}},re=()=>{o.length===l.length?b([]):b(l.map(s=>s.id))};return $&&l.length===0?e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(ie,{size:"large"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"聯絡表單管理"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"查看和管理網站聯絡表單"})]}),e.jsxs("button",{onClick:te,className:"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(me,{className:"h-5 w-5 mr-2"}),"匯出 CSV"]})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("form",{onSubmit:G,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("input",{type:"text",value:w,onChange:s=>P(s.target.value),className:"w-full h-12 !pr-12 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none",placeholder:"搜尋姓名、Email、電話..."}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none",children:e.jsx(de,{className:"h-5 w-5 text-primary-more"})})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ge,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex rounded-md shadow-sm",children:[e.jsx("button",{onClick:()=>A("all"),className:N("px-4 py-2 text-sm font-medium rounded-l-md border",u==="all"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:"全部"}),e.jsx("button",{onClick:()=>A("unread"),className:N("px-4 py-2 text-sm font-medium border-t border-b",u==="unread"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:"未讀"}),e.jsx("button",{onClick:()=>A("replied"),className:N("px-4 py-2 text-sm font-medium rounded-r-md border",u==="replied"?"bg-primary-600 text-white border-primary-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:"已回覆"})]})]})]}),o.length>0&&e.jsxs("div",{className:"flex items-center justify-between bg-primary-50 px-4 py-2 rounded-md",children:[e.jsxs("span",{className:"text-sm text-primary-700",children:["已選擇 ",o.length," 個項目"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:se,className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"標記為已讀"}),e.jsx("button",{onClick:()=>T(o),className:"text-sm font-medium text-red-600 hover:text-red-500",children:"封存"})]})]})]})}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left",children:e.jsx("input",{type:"checkbox",checked:o.length===l.length&&l.length>0,onChange:re,className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"聯絡人"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"主旨 / 訊息"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"狀態"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"時間"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(s=>e.jsxs("tr",{className:N("hover:bg-gray-50 cursor-pointer",!s.is_read&&"bg-blue-50"),onClick:()=>J(s),children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",onClick:a=>a.stopPropagation(),children:e.jsx("input",{type:"checkbox",checked:o.includes(s.id),onChange:a=>{a.target.checked?b([...o,s.id]):b(o.filter(x=>x!==s.id))},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:s.is_read?e.jsx(he,{className:"h-5 w-5 text-gray-400"}):e.jsx(z,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.email}),s.phone&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(fe,{className:"h-3 w-3 mr-1"}),s.phone]}),s.company&&e.jsxs("div",{className:"text-sm text-gray-500 flex items-center",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),s.company]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[s.subject&&e.jsx("div",{className:"font-medium",children:s.subject}),e.jsx("div",{className:"text-gray-500 line-clamp-2",children:s.message})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[!s.is_read&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"未讀"}),s.is_replied&&e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(I,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"已回覆"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",onClick:a=>a.stopPropagation(),children:e.jsx("button",{onClick:()=>T([s.id]),className:"p-2 rounded-md transition-colors text-gray-400 hover:text-red-600 hover:bg-red-50",title:"封存",children:e.jsx(B,{className:"h-5 w-5"})})})]},s.id))})]}),l.length===0&&!$&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"沒有找到符合條件的聯絡表單"})]})]}),E>1&&e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[e.jsx("button",{onClick:()=>v({page:y-1}),disabled:y===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"上一頁"}),e.jsx("button",{onClick:()=>v({page:y+1}),disabled:y===E,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"下一頁"})]}),e.jsx("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-center",children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:Array.from({length:E},(s,a)=>a+1).map(s=>e.jsx("button",{onClick:()=>v({page:s}),className:N("relative inline-flex items-center px-4 py-2 border text-sm font-medium",s===y?"z-10 bg-primary-50 border-primary-500 text-primary-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:s},s))})})]}),e.jsxs(h,{open:!!t,onClose:()=>f(null),className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(h.Panel,{className:"mx-auto max-w-2xl w-full bg-white rounded-lg shadow-xl max-h-[90vh] overflow-y-auto",children:t&&e.jsxs("div",{className:"p-6",children:[e.jsxs(h.Title,{className:"text-lg font-medium text-gray-900 mb-4 flex items-center justify-between",children:["聯絡表單詳情",e.jsx("div",{className:"flex items-center space-x-2",children:!t.is_replied&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Q(t),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"回覆"]}),e.jsxs("button",{onClick:()=>Y(t.id),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[e.jsx(I,{className:"h-4 w-4 mr-1"}),"標記已回覆"]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"聯絡人資訊"}),e.jsxs("dl",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"姓名"}),e.jsx("dd",{className:"text-sm text-gray-900",children:t.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Email"}),e.jsx("dd",{className:"text-sm text-gray-900",children:e.jsx("a",{href:`mailto:${t.email}`,className:"text-primary-600 hover:text-primary-500",children:t.email})})]}),t.phone&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"電話"}),e.jsx("dd",{className:"text-sm text-gray-900",children:e.jsx("a",{href:`tel:${t.phone}`,className:"text-primary-600 hover:text-primary-500",children:t.phone})})]}),t.company&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"公司"}),e.jsx("dd",{className:"text-sm text-gray-900",children:t.company})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"訊息內容"}),t.subject&&e.jsxs("p",{className:"text-sm font-medium text-gray-700 mb-2",children:["主旨: ",t.subject]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-900 whitespace-pre-wrap",children:t.message})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"備註"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("textarea",{value:j,onChange:s=>M(s.target.value),rows:3,className:"w-full px-4 py-3 pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none resize-none",placeholder:"新增內部備註..."})]}),j!==t.notes&&e.jsx("button",{onClick:K,className:"mt-2 bg-primary-more text-white px-6 py-2 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors",children:"儲存備註"})]}),e.jsx("div",{className:"border-t pt-4",children:e.jsxs("dl",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-gray-500",children:"提交時間"}),e.jsx("dd",{className:"text-gray-900",children:new Date(t.created_at).toLocaleString()})]}),t.read_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-gray-500",children:"已讀時間"}),e.jsxs("dd",{className:"text-gray-900",children:[new Date(t.read_at).toLocaleString(),t.read_by_name&&` by ${t.read_by_name}`]})]}),t.replied_at&&e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-gray-500",children:"回覆時間"}),e.jsxs("dd",{className:"text-gray-900",children:[new Date(t.replied_at).toLocaleString(),t.replied_by_name&&` by ${t.replied_by_name}`]})]}),t.source&&e.jsxs("div",{children:[e.jsx("dt",{className:"font-medium text-gray-500",children:"來源"}),e.jsx("dd",{className:"text-gray-900",children:t.source})]})]})})]}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("button",{onClick:()=>f(null),className:"bg-gray-500 text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors",children:"關閉"})})]})})})]}),e.jsxs(h,{open:!!m,onClose:()=>C(null),className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsx(h.Panel,{className:"mx-auto max-w-2xl w-full bg-white rounded-lg shadow-xl max-h-[90vh] overflow-y-auto",children:m&&e.jsxs("div",{className:"p-6",children:[e.jsxs(h.Title,{className:"text-lg font-medium text-gray-900 mb-4",children:["回覆聯絡表單 - ",m.name]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"原始訊息"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"來自:"})," ",m.name," (",m.email,")"]}),m.subject&&e.jsxs("p",{children:[e.jsx("strong",{children:"主旨:"})," ",m.subject]}),e.jsx("div",{className:"mt-2 p-3 bg-white border border-gray-200 rounded",children:e.jsx("p",{className:"whitespace-pre-wrap",children:m.message})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reply-message",className:"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider",children:["回覆內容 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("textarea",{id:"reply-message",value:S,onChange:s=>L(s.target.value),rows:8,className:"w-full px-4 py-3 pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none resize-none",placeholder:"請輸入您的回覆...",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reply-notes",className:"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider",children:"內部備註"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("textarea",{id:"reply-notes",value:_,onChange:s=>F(s.target.value),rows:3,className:"w-full px-4 py-3 pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none resize-none",placeholder:"新增內部備註（選填）..."})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-center space-x-4",children:[e.jsx("button",{onClick:()=>C(null),className:"bg-gray-500 text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors",children:"取消"}),e.jsxs("button",{onClick:X,disabled:!S.trim(),className:"bg-primary-more text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(U,{className:"h-4 w-4 mr-2 inline"}),"發送回覆"]})]})]})})})]}),e.jsxs(h,{open:H,onClose:()=>R(!1),className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(h.Panel,{className:"mx-auto max-w-md w-full bg-white rounded-lg shadow-xl p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(B,{className:"h-6 w-6 text-red-600"})}),e.jsx("div",{className:"ml-3",children:e.jsx(h.Title,{className:"text-lg font-medium text-gray-900",children:"確認封存"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["您確定要封存",g.length===1?"這個":`這 ${g.length} 個`,"聯絡表單嗎？"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"封存後的表單將不會在列表中顯示，但資料會保留在系統中以供查閱。"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"取消"}),e.jsx("button",{onClick:ee,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"確認封存"})]})]})})]})]})};export{ke as default};
//# sourceMappingURL=index-B6jvgnDw.js.map

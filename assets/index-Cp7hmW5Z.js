import{r as s,V as C,F as f,k as R,j as e,l as k,L as d}from"./index-By57yhN3.js";import{p as h}from"./project.service-zsHHG8Aw.js";import{c as j}from"./contact.service-vAsoKIKo.js";import{t as E}from"./tag.service-BaFTJMAM.js";import{F as L}from"./EyeIcon-12aYC9kG.js";import{F as P}from"./CheckCircleIcon-FQWdJK1s.js";function $({title:a,titleId:r,...i},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const F=s.forwardRef($);function S({title:a,titleId:r,...i},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const M=s.forwardRef(S);function _({title:a,titleId:r,...i},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}const D=s.forwardRef(_);function V({title:a,titleId:r,...i},l){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":r},i),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const B=s.forwardRef(V),U=()=>{const[a,r]=s.useState({totalProjects:0,featuredProjects:0,totalContacts:0,unreadContacts:0,totalTags:0,totalViews:0}),[i,l]=s.useState([]),[g,p]=s.useState([]),[v,u]=s.useState(!0);s.useEffect(()=>{w()},[]);const w=async()=>{try{u(!0);const[t,o,m]=await Promise.all([h.getProjects({limit:5,orderBy:"created_at",orderDir:"DESC"}),j.getContacts({limit:5,orderBy:"created_at",orderDir:"DESC"}),E.getTags()]);if(t.success&&t.data){l(t.data.items);const n=await h.getProjects({limit:1}),c=await h.getProjects({is_featured:!0,limit:1});n.success&&n.data&&r(x=>({...x,totalProjects:n.data.pagination.total,totalViews:t.data.items.reduce((y,b)=>y+b.view_count,0)})),c.success&&c.data&&r(x=>({...x,featuredProjects:c.data.pagination.total}))}if(o.success&&o.data){p(o.data.items);const n=await j.getContacts({is_read:!1,limit:1});n.success&&n.data&&r(c=>({...c,totalContacts:o.data.pagination.total,unreadContacts:n.data.pagination.total}))}m.success&&m.data&&m.data.items&&r(n=>({...n,totalTags:m.data.items.length}))}catch(t){C.error("無法載入儀表板資料"),console.error("Dashboard fetch error:",t)}finally{u(!1)}},N=[{title:"總專案數",value:a.totalProjects,icon:f,href:"/admin/projects",color:"bg-blue-500"},{title:"精選專案",value:a.featuredProjects,icon:M,href:"/admin/projects?is_featured=true",color:"bg-yellow-500"},{title:"聯絡表單",value:a.totalContacts,icon:R,href:"/admin/contacts",color:"bg-green-500",badge:a.unreadContacts>0?`${a.unreadContacts} 未讀`:void 0},{title:"標籤數量",value:a.totalTags,icon:D,href:"/admin/tags",color:"bg-purple-500"}];return v?e.jsx("div",{className:"flex justify-center items-center min-h-[60vh]",children:e.jsx(k,{size:"large"})}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"儀表板"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"歡迎回來！以下是您的網站概況。"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:N.map(t=>e.jsx(d,{to:t.href,className:"relative bg-white p-6 rounded-lg shadow hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`${t.color} rounded-md p-3`,children:e.jsx(t.icon,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:t.title}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:t.value}),t.badge&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 mt-1",children:t.badge})]})]})},t.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"最新專案"}),e.jsx(d,{to:"/admin/projects",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"查看全部"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:i.length>0?i.map(t=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:t.title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.category," • ",t.location]}),e.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-500",children:[e.jsx(L,{className:"h-4 w-4 mr-1"}),t.view_count," 瀏覽",t.is_featured&&e.jsx("span",{className:"ml-3 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800",children:"精選"})]})]}),e.jsx(d,{to:`/admin/projects?id=${t.id}`,className:"ml-4 text-sm font-medium text-primary-600 hover:text-primary-500",children:"編輯"})]})},t.id)):e.jsx("div",{className:"p-6 text-center text-gray-500",children:"尚無專案資料"})})]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"最新聯絡表單"}),e.jsx(d,{to:"/admin/contacts",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:"查看全部"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:g.length>0?g.map(t=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:t.name}),!t.is_read&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"未讀"}),t.is_replied&&e.jsx(P,{className:"ml-2 h-4 w-4 text-green-500"})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.email," ",t.phone&&`• ${t.phone}`]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-1",children:t.subject||t.message})]}),e.jsx(d,{to:`/admin/contacts?id=${t.id}`,className:"ml-4 text-sm font-medium text-primary-600 hover:text-primary-500",children:"查看"})]})},t.id)):e.jsx("div",{className:"p-6 text-center text-gray-500",children:"尚無聯絡表單"})})]})]}),e.jsxs("div",{className:"mt-8 bg-white shadow rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"快速統計"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(F,{className:"h-8 w-8 text-green-500"})}),e.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:a.totalViews}),e.jsx("p",{className:"text-sm text-gray-500",children:"總瀏覽次數"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(B,{className:"h-8 w-8 text-blue-500"})}),e.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:a.unreadContacts}),e.jsx("p",{className:"text-sm text-gray-500",children:"待處理聯絡"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(f,{className:"h-8 w-8 text-purple-500"})}),e.jsx("p",{className:"mt-2 text-3xl font-semibold text-gray-900",children:a.featuredProjects}),e.jsx("p",{className:"text-sm text-gray-500",children:"精選專案"})]})]})]})]})};export{U as default};
//# sourceMappingURL=index-Cp7hmW5Z.js.map

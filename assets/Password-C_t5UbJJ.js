import{r as o,j as e,l as y,V as a,G as v}from"./index-By57yhN3.js";import{F as k}from"./KeyIcon-CgAdLYML.js";import{F as x}from"./EyeSlashIcon-Bv4i0BR-.js";import{F as w}from"./EyeIcon-12aYC9kG.js";import{F as n}from"./CheckCircleIcon-FQWdJK1s.js";const A=()=>{const[s,h]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[u,g]=o.useState(!1),[l,f]=o.useState(!1),[i,j]=o.useState(!1),[c,b]=o.useState(!1),d=(t,r)=>{h(m=>({...m,[t]:r}))},p=t=>{const r=[];return t.length<8&&r.push("密碼長度至少需要8個字元"),/[A-Z]/.test(t)||r.push("密碼必須包含至少一個大寫字母"),/[a-z]/.test(t)||r.push("密碼必須包含至少一個小寫字母"),/[0-9]/.test(t)||r.push("密碼必須包含至少一個數字"),/[!@#$%^&*(),.?":{}|<>]/.test(t)||r.push("密碼必須包含至少一個特殊字元"),r},N=async t=>{if(t.preventDefault(),!s.currentPassword){a.error("請輸入目前密碼");return}if(!s.newPassword){a.error("請輸入新密碼");return}if(!s.confirmPassword){a.error("請確認新密碼");return}if(s.newPassword!==s.confirmPassword){a.error("新密碼與確認密碼不一致");return}if(s.currentPassword===s.newPassword){a.error("新密碼不能與目前密碼相同");return}const r=p(s.newPassword);if(r.length>0){a.error(r[0]);return}try{g(!0),await v.changePassword(s.currentPassword,s.newPassword),a.success("密碼修改成功"),h({currentPassword:"",newPassword:"",confirmPassword:""})}catch(m){console.error("Password change error:",m)}finally{g(!1)}},P=(s.newPassword?p(s.newPassword):[]).length===0;return e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"密碼設定"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"修改您的登入密碼"})]}),e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(k,{className:"h-6 w-6 text-primary-600 mr-2"}),e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"修改密碼"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"currentPassword",className:"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider",children:["目前密碼 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("input",{type:l?"text":"password",id:"currentPassword",value:s.currentPassword,onChange:t=>d("currentPassword",t.target.value),className:"w-full h-12 !pr-12 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none",placeholder:"請輸入目前的密碼",required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:()=>f(!l),children:l?e.jsx(x,{className:"h-5 w-5 text-primary-more"}):e.jsx(w,{className:"h-5 w-5 text-primary-more"})})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"newPassword",className:"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider",children:["新密碼 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("input",{type:i?"text":"password",id:"newPassword",value:s.newPassword,onChange:t=>d("newPassword",t.target.value),className:"w-full h-12 !pr-12 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none",placeholder:"請輸入新密碼",required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:()=>j(!i),children:i?e.jsx(x,{className:"h-5 w-5 text-primary-more"}):e.jsx(w,{className:"h-5 w-5 text-primary-more"})})]}),s.newPassword&&e.jsx("div",{className:"mt-3",children:e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm",children:[e.jsxs("div",{className:`flex items-center ${s.newPassword.length>=8?"text-green-600":"text-gray-400"}`,children:[e.jsx(n,{className:`h-4 w-4 mr-1 ${s.newPassword.length>=8?"text-green-600":"text-gray-400"}`}),"至少8個字元"]}),e.jsxs("div",{className:`flex items-center ${/[A-Z]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`,children:[e.jsx(n,{className:`h-4 w-4 mr-1 ${/[A-Z]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`}),"大寫字母"]}),e.jsxs("div",{className:`flex items-center ${/[a-z]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`,children:[e.jsx(n,{className:`h-4 w-4 mr-1 ${/[a-z]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`}),"小寫字母"]}),e.jsxs("div",{className:`flex items-center ${/[0-9]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`,children:[e.jsx(n,{className:`h-4 w-4 mr-1 ${/[0-9]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`}),"數字"]}),e.jsxs("div",{className:`flex items-center ${/[!@#$%^&*(),.?":{}|<>]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`,children:[e.jsx(n,{className:`h-4 w-4 mr-1 ${/[!@#$%^&*(),.?":{}|<>]/.test(s.newPassword)?"text-green-600":"text-gray-400"}`}),"特殊字元"]})]})})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"confirmPassword",className:"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider",children:["確認新密碼 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more"}),e.jsx("input",{type:c?"text":"password",id:"confirmPassword",value:s.confirmPassword,onChange:t=>d("confirmPassword",t.target.value),className:"w-full h-12 !pr-12 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none",placeholder:"請再次輸入新密碼",required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:()=>b(!c),children:c?e.jsx(x,{className:"h-5 w-5 text-primary-more"}):e.jsx(w,{className:"h-5 w-5 text-primary-more"})})]}),s.confirmPassword&&e.jsx("div",{className:"mt-2",children:s.newPassword===s.confirmPassword?e.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[e.jsx(n,{className:"h-4 w-4 mr-1"}),"密碼一致"]}):e.jsxs("div",{className:"flex items-center text-red-600 text-sm",children:[e.jsx("span",{className:"h-4 w-4 mr-1 text-center",children:"✗"}),"密碼不一致"]})})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-amber-800 mb-2",children:"密碼安全提醒"}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:"• 請使用強密碼以保護您的帳戶安全"}),e.jsx("li",{children:"• 不要使用個人資訊作為密碼"}),e.jsx("li",{children:"• 定期更換密碼，避免重複使用舊密碼"}),e.jsx("li",{children:"• 不要與他人分享您的密碼"})]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{type:"submit",disabled:u||!P||s.newPassword!==s.confirmPassword,className:"bg-primary-more text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:u?e.jsxs(e.Fragment,{children:[e.jsx(y,{size:"small",className:"mr-2"}),"修改中..."]}):"修改密碼"})})]})]})};export{A as default};
//# sourceMappingURL=Password-C_t5UbJJ.js.map

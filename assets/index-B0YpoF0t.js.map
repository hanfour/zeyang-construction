{"version":3,"file":"index-B0YpoF0t.js","sources":["../../node_modules/@tanstack/query-core/build/modern/queryObserver.js","../../node_modules/@tanstack/react-query/build/modern/IsRestoringProvider.js","../../node_modules/@tanstack/react-query/build/modern/QueryErrorResetBoundary.js","../../node_modules/@tanstack/react-query/build/modern/errorBoundaryUtils.js","../../node_modules/@tanstack/react-query/build/modern/suspense.js","../../node_modules/@tanstack/react-query/build/modern/useBaseQuery.js","../../node_modules/@tanstack/react-query/build/modern/useQuery.js","../../node_modules/@heroicons/react/24/outline/esm/ArrowsUpDownIcon.js","../../node_modules/@heroicons/react/24/outline/esm/CloudArrowUpIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PencilIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PhotoIcon.js","../../node_modules/@heroicons/react/24/outline/esm/PlusIcon.js","../../node_modules/@heroicons/react/24/outline/esm/StarIcon.js","../../node_modules/@heroicons/react/24/solid/esm/StarIcon.js","../../node_modules/@heroicons/react/24/solid/esm/XMarkIcon.js","../../src/components/Admin/DynamicFieldManager.tsx","../../src/components/Admin/ProjectImageManager.tsx","../../src/components/Common/TagSelector.tsx","../../src/pages/Admin/Projects/index.tsx"],"sourcesContent":["// src/queryObserver.ts\nimport { focusManager } from \"./focusManager.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { fetchState } from \"./query.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { pendingThenable } from \"./thenable.js\";\nimport {\n  isServer,\n  isValidTimeout,\n  noop,\n  replaceData,\n  resolveEnabled,\n  resolveStaleTime,\n  shallowEqualObjects,\n  timeUntilStale\n} from \"./utils.js\";\nvar QueryObserver = class extends Subscribable {\n  constructor(client, options) {\n    super();\n    this.options = options;\n    this.#client = client;\n    this.#selectError = null;\n    this.#currentThenable = pendingThenable();\n    if (!this.options.experimental_prefetchInRender) {\n      this.#currentThenable.reject(\n        new Error(\"experimental_prefetchInRender feature flag is not enabled\")\n      );\n    }\n    this.bindMethods();\n    this.setOptions(options);\n  }\n  #client;\n  #currentQuery = void 0;\n  #currentQueryInitialState = void 0;\n  #currentResult = void 0;\n  #currentResultState;\n  #currentResultOptions;\n  #currentThenable;\n  #selectError;\n  #selectFn;\n  #selectResult;\n  // This property keeps track of the last query with defined data.\n  // It will be used to pass the previous data and query to the placeholder function between renders.\n  #lastQueryWithDefinedData;\n  #staleTimeoutId;\n  #refetchIntervalId;\n  #currentRefetchInterval;\n  #trackedProps = /* @__PURE__ */ new Set();\n  bindMethods() {\n    this.refetch = this.refetch.bind(this);\n  }\n  onSubscribe() {\n    if (this.listeners.size === 1) {\n      this.#currentQuery.addObserver(this);\n      if (shouldFetchOnMount(this.#currentQuery, this.options)) {\n        this.#executeFetch();\n      } else {\n        this.updateResult();\n      }\n      this.#updateTimers();\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.destroy();\n    }\n  }\n  shouldFetchOnReconnect() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnReconnect\n    );\n  }\n  shouldFetchOnWindowFocus() {\n    return shouldFetchOn(\n      this.#currentQuery,\n      this.options,\n      this.options.refetchOnWindowFocus\n    );\n  }\n  destroy() {\n    this.listeners = /* @__PURE__ */ new Set();\n    this.#clearStaleTimeout();\n    this.#clearRefetchInterval();\n    this.#currentQuery.removeObserver(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    const prevQuery = this.#currentQuery;\n    this.options = this.#client.defaultQueryOptions(options);\n    if (this.options.enabled !== void 0 && typeof this.options.enabled !== \"boolean\" && typeof this.options.enabled !== \"function\" && typeof resolveEnabled(this.options.enabled, this.#currentQuery) !== \"boolean\") {\n      throw new Error(\n        \"Expected enabled to be a boolean or a callback that returns a boolean\"\n      );\n    }\n    this.#updateQuery();\n    this.#currentQuery.setOptions(this.options);\n    if (prevOptions._defaulted && !shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getQueryCache().notify({\n        type: \"observerOptionsUpdated\",\n        query: this.#currentQuery,\n        observer: this\n      });\n    }\n    const mounted = this.hasListeners();\n    if (mounted && shouldFetchOptionally(\n      this.#currentQuery,\n      prevQuery,\n      this.options,\n      prevOptions\n    )) {\n      this.#executeFetch();\n    }\n    this.updateResult();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || resolveStaleTime(this.options.staleTime, this.#currentQuery) !== resolveStaleTime(prevOptions.staleTime, this.#currentQuery))) {\n      this.#updateStaleTimeout();\n    }\n    const nextRefetchInterval = this.#computeRefetchInterval();\n    if (mounted && (this.#currentQuery !== prevQuery || resolveEnabled(this.options.enabled, this.#currentQuery) !== resolveEnabled(prevOptions.enabled, this.#currentQuery) || nextRefetchInterval !== this.#currentRefetchInterval)) {\n      this.#updateRefetchInterval(nextRefetchInterval);\n    }\n  }\n  getOptimisticResult(options) {\n    const query = this.#client.getQueryCache().build(this.#client, options);\n    const result = this.createResult(query, options);\n    if (shouldAssignObserverCurrentProperties(this, result)) {\n      this.#currentResult = result;\n      this.#currentResultOptions = this.options;\n      this.#currentResultState = this.#currentQuery.state;\n    }\n    return result;\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  trackResult(result, onPropTracked) {\n    return new Proxy(result, {\n      get: (target, key) => {\n        this.trackProp(key);\n        onPropTracked?.(key);\n        return Reflect.get(target, key);\n      }\n    });\n  }\n  trackProp(key) {\n    this.#trackedProps.add(key);\n  }\n  getCurrentQuery() {\n    return this.#currentQuery;\n  }\n  refetch({ ...options } = {}) {\n    return this.fetch({\n      ...options\n    });\n  }\n  fetchOptimistic(options) {\n    const defaultedOptions = this.#client.defaultQueryOptions(options);\n    const query = this.#client.getQueryCache().build(this.#client, defaultedOptions);\n    return query.fetch().then(() => this.createResult(query, defaultedOptions));\n  }\n  fetch(fetchOptions) {\n    return this.#executeFetch({\n      ...fetchOptions,\n      cancelRefetch: fetchOptions.cancelRefetch ?? true\n    }).then(() => {\n      this.updateResult();\n      return this.#currentResult;\n    });\n  }\n  #executeFetch(fetchOptions) {\n    this.#updateQuery();\n    let promise = this.#currentQuery.fetch(\n      this.options,\n      fetchOptions\n    );\n    if (!fetchOptions?.throwOnError) {\n      promise = promise.catch(noop);\n    }\n    return promise;\n  }\n  #updateStaleTimeout() {\n    this.#clearStaleTimeout();\n    const staleTime = resolveStaleTime(\n      this.options.staleTime,\n      this.#currentQuery\n    );\n    if (isServer || this.#currentResult.isStale || !isValidTimeout(staleTime)) {\n      return;\n    }\n    const time = timeUntilStale(this.#currentResult.dataUpdatedAt, staleTime);\n    const timeout = time + 1;\n    this.#staleTimeoutId = setTimeout(() => {\n      if (!this.#currentResult.isStale) {\n        this.updateResult();\n      }\n    }, timeout);\n  }\n  #computeRefetchInterval() {\n    return (typeof this.options.refetchInterval === \"function\" ? this.options.refetchInterval(this.#currentQuery) : this.options.refetchInterval) ?? false;\n  }\n  #updateRefetchInterval(nextInterval) {\n    this.#clearRefetchInterval();\n    this.#currentRefetchInterval = nextInterval;\n    if (isServer || resolveEnabled(this.options.enabled, this.#currentQuery) === false || !isValidTimeout(this.#currentRefetchInterval) || this.#currentRefetchInterval === 0) {\n      return;\n    }\n    this.#refetchIntervalId = setInterval(() => {\n      if (this.options.refetchIntervalInBackground || focusManager.isFocused()) {\n        this.#executeFetch();\n      }\n    }, this.#currentRefetchInterval);\n  }\n  #updateTimers() {\n    this.#updateStaleTimeout();\n    this.#updateRefetchInterval(this.#computeRefetchInterval());\n  }\n  #clearStaleTimeout() {\n    if (this.#staleTimeoutId) {\n      clearTimeout(this.#staleTimeoutId);\n      this.#staleTimeoutId = void 0;\n    }\n  }\n  #clearRefetchInterval() {\n    if (this.#refetchIntervalId) {\n      clearInterval(this.#refetchIntervalId);\n      this.#refetchIntervalId = void 0;\n    }\n  }\n  createResult(query, options) {\n    const prevQuery = this.#currentQuery;\n    const prevOptions = this.options;\n    const prevResult = this.#currentResult;\n    const prevResultState = this.#currentResultState;\n    const prevResultOptions = this.#currentResultOptions;\n    const queryChange = query !== prevQuery;\n    const queryInitialState = queryChange ? query.state : this.#currentQueryInitialState;\n    const { state } = query;\n    let newState = { ...state };\n    let isPlaceholderData = false;\n    let data;\n    if (options._optimisticResults) {\n      const mounted = this.hasListeners();\n      const fetchOnMount = !mounted && shouldFetchOnMount(query, options);\n      const fetchOptionally = mounted && shouldFetchOptionally(query, prevQuery, options, prevOptions);\n      if (fetchOnMount || fetchOptionally) {\n        newState = {\n          ...newState,\n          ...fetchState(state.data, query.options)\n        };\n      }\n      if (options._optimisticResults === \"isRestoring\") {\n        newState.fetchStatus = \"idle\";\n      }\n    }\n    let { error, errorUpdatedAt, status } = newState;\n    data = newState.data;\n    let skipSelect = false;\n    if (options.placeholderData !== void 0 && data === void 0 && status === \"pending\") {\n      let placeholderData;\n      if (prevResult?.isPlaceholderData && options.placeholderData === prevResultOptions?.placeholderData) {\n        placeholderData = prevResult.data;\n        skipSelect = true;\n      } else {\n        placeholderData = typeof options.placeholderData === \"function\" ? options.placeholderData(\n          this.#lastQueryWithDefinedData?.state.data,\n          this.#lastQueryWithDefinedData\n        ) : options.placeholderData;\n      }\n      if (placeholderData !== void 0) {\n        status = \"success\";\n        data = replaceData(\n          prevResult?.data,\n          placeholderData,\n          options\n        );\n        isPlaceholderData = true;\n      }\n    }\n    if (options.select && data !== void 0 && !skipSelect) {\n      if (prevResult && data === prevResultState?.data && options.select === this.#selectFn) {\n        data = this.#selectResult;\n      } else {\n        try {\n          this.#selectFn = options.select;\n          data = options.select(data);\n          data = replaceData(prevResult?.data, data, options);\n          this.#selectResult = data;\n          this.#selectError = null;\n        } catch (selectError) {\n          this.#selectError = selectError;\n        }\n      }\n    }\n    if (this.#selectError) {\n      error = this.#selectError;\n      data = this.#selectResult;\n      errorUpdatedAt = Date.now();\n      status = \"error\";\n    }\n    const isFetching = newState.fetchStatus === \"fetching\";\n    const isPending = status === \"pending\";\n    const isError = status === \"error\";\n    const isLoading = isPending && isFetching;\n    const hasData = data !== void 0;\n    const result = {\n      status,\n      fetchStatus: newState.fetchStatus,\n      isPending,\n      isSuccess: status === \"success\",\n      isError,\n      isInitialLoading: isLoading,\n      isLoading,\n      data,\n      dataUpdatedAt: newState.dataUpdatedAt,\n      error,\n      errorUpdatedAt,\n      failureCount: newState.fetchFailureCount,\n      failureReason: newState.fetchFailureReason,\n      errorUpdateCount: newState.errorUpdateCount,\n      isFetched: newState.dataUpdateCount > 0 || newState.errorUpdateCount > 0,\n      isFetchedAfterMount: newState.dataUpdateCount > queryInitialState.dataUpdateCount || newState.errorUpdateCount > queryInitialState.errorUpdateCount,\n      isFetching,\n      isRefetching: isFetching && !isPending,\n      isLoadingError: isError && !hasData,\n      isPaused: newState.fetchStatus === \"paused\",\n      isPlaceholderData,\n      isRefetchError: isError && hasData,\n      isStale: isStale(query, options),\n      refetch: this.refetch,\n      promise: this.#currentThenable,\n      isEnabled: resolveEnabled(options.enabled, query) !== false\n    };\n    const nextResult = result;\n    if (this.options.experimental_prefetchInRender) {\n      const finalizeThenableIfPossible = (thenable) => {\n        if (nextResult.status === \"error\") {\n          thenable.reject(nextResult.error);\n        } else if (nextResult.data !== void 0) {\n          thenable.resolve(nextResult.data);\n        }\n      };\n      const recreateThenable = () => {\n        const pending = this.#currentThenable = nextResult.promise = pendingThenable();\n        finalizeThenableIfPossible(pending);\n      };\n      const prevThenable = this.#currentThenable;\n      switch (prevThenable.status) {\n        case \"pending\":\n          if (query.queryHash === prevQuery.queryHash) {\n            finalizeThenableIfPossible(prevThenable);\n          }\n          break;\n        case \"fulfilled\":\n          if (nextResult.status === \"error\" || nextResult.data !== prevThenable.value) {\n            recreateThenable();\n          }\n          break;\n        case \"rejected\":\n          if (nextResult.status !== \"error\" || nextResult.error !== prevThenable.reason) {\n            recreateThenable();\n          }\n          break;\n      }\n    }\n    return nextResult;\n  }\n  updateResult() {\n    const prevResult = this.#currentResult;\n    const nextResult = this.createResult(this.#currentQuery, this.options);\n    this.#currentResultState = this.#currentQuery.state;\n    this.#currentResultOptions = this.options;\n    if (this.#currentResultState.data !== void 0) {\n      this.#lastQueryWithDefinedData = this.#currentQuery;\n    }\n    if (shallowEqualObjects(nextResult, prevResult)) {\n      return;\n    }\n    this.#currentResult = nextResult;\n    const shouldNotifyListeners = () => {\n      if (!prevResult) {\n        return true;\n      }\n      const { notifyOnChangeProps } = this.options;\n      const notifyOnChangePropsValue = typeof notifyOnChangeProps === \"function\" ? notifyOnChangeProps() : notifyOnChangeProps;\n      if (notifyOnChangePropsValue === \"all\" || !notifyOnChangePropsValue && !this.#trackedProps.size) {\n        return true;\n      }\n      const includedProps = new Set(\n        notifyOnChangePropsValue ?? this.#trackedProps\n      );\n      if (this.options.throwOnError) {\n        includedProps.add(\"error\");\n      }\n      return Object.keys(this.#currentResult).some((key) => {\n        const typedKey = key;\n        const changed = this.#currentResult[typedKey] !== prevResult[typedKey];\n        return changed && includedProps.has(typedKey);\n      });\n    };\n    this.#notify({ listeners: shouldNotifyListeners() });\n  }\n  #updateQuery() {\n    const query = this.#client.getQueryCache().build(this.#client, this.options);\n    if (query === this.#currentQuery) {\n      return;\n    }\n    const prevQuery = this.#currentQuery;\n    this.#currentQuery = query;\n    this.#currentQueryInitialState = query.state;\n    if (this.hasListeners()) {\n      prevQuery?.removeObserver(this);\n      query.addObserver(this);\n    }\n  }\n  onQueryUpdate() {\n    this.updateResult();\n    if (this.hasListeners()) {\n      this.#updateTimers();\n    }\n  }\n  #notify(notifyOptions) {\n    notifyManager.batch(() => {\n      if (notifyOptions.listeners) {\n        this.listeners.forEach((listener) => {\n          listener(this.#currentResult);\n        });\n      }\n      this.#client.getQueryCache().notify({\n        query: this.#currentQuery,\n        type: \"observerResultsUpdated\"\n      });\n    });\n  }\n};\nfunction shouldLoadOnMount(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.state.data === void 0 && !(query.state.status === \"error\" && options.retryOnMount === false);\n}\nfunction shouldFetchOnMount(query, options) {\n  return shouldLoadOnMount(query, options) || query.state.data !== void 0 && shouldFetchOn(query, options, options.refetchOnMount);\n}\nfunction shouldFetchOn(query, options, field) {\n  if (resolveEnabled(options.enabled, query) !== false && resolveStaleTime(options.staleTime, query) !== \"static\") {\n    const value = typeof field === \"function\" ? field(query) : field;\n    return value === \"always\" || value !== false && isStale(query, options);\n  }\n  return false;\n}\nfunction shouldFetchOptionally(query, prevQuery, options, prevOptions) {\n  return (query !== prevQuery || resolveEnabled(prevOptions.enabled, query) === false) && (!options.suspense || query.state.status !== \"error\") && isStale(query, options);\n}\nfunction isStale(query, options) {\n  return resolveEnabled(options.enabled, query) !== false && query.isStaleByTime(resolveStaleTime(options.staleTime, query));\n}\nfunction shouldAssignObserverCurrentProperties(observer, optimisticResult) {\n  if (!shallowEqualObjects(observer.getCurrentResult(), optimisticResult)) {\n    return true;\n  }\n  return false;\n}\nexport {\n  QueryObserver\n};\n//# sourceMappingURL=queryObserver.js.map","\"use client\";\n\n// src/IsRestoringProvider.ts\nimport * as React from \"react\";\nvar IsRestoringContext = React.createContext(false);\nvar useIsRestoring = () => React.useContext(IsRestoringContext);\nvar IsRestoringProvider = IsRestoringContext.Provider;\nexport {\n  IsRestoringProvider,\n  useIsRestoring\n};\n//# sourceMappingURL=IsRestoringProvider.js.map","\"use client\";\n\n// src/QueryErrorResetBoundary.tsx\nimport * as React from \"react\";\nimport { jsx } from \"react/jsx-runtime\";\nfunction createValue() {\n  let isReset = false;\n  return {\n    clearReset: () => {\n      isReset = false;\n    },\n    reset: () => {\n      isReset = true;\n    },\n    isReset: () => {\n      return isReset;\n    }\n  };\n}\nvar QueryErrorResetBoundaryContext = React.createContext(createValue());\nvar useQueryErrorResetBoundary = () => React.useContext(QueryErrorResetBoundaryContext);\nvar QueryErrorResetBoundary = ({\n  children\n}) => {\n  const [value] = React.useState(() => createValue());\n  return /* @__PURE__ */ jsx(QueryErrorResetBoundaryContext.Provider, { value, children: typeof children === \"function\" ? children(value) : children });\n};\nexport {\n  QueryErrorResetBoundary,\n  useQueryErrorResetBoundary\n};\n//# sourceMappingURL=QueryErrorResetBoundary.js.map","\"use client\";\n\n// src/errorBoundaryUtils.ts\nimport * as React from \"react\";\nimport { shouldThrowError } from \"@tanstack/query-core\";\nvar ensurePreventErrorBoundaryRetry = (options, errorResetBoundary) => {\n  if (options.suspense || options.throwOnError || options.experimental_prefetchInRender) {\n    if (!errorResetBoundary.isReset()) {\n      options.retryOnMount = false;\n    }\n  }\n};\nvar useClearResetErrorBoundary = (errorResetBoundary) => {\n  React.useEffect(() => {\n    errorResetBoundary.clearReset();\n  }, [errorResetBoundary]);\n};\nvar getHasError = ({\n  result,\n  errorResetBoundary,\n  throwOnError,\n  query,\n  suspense\n}) => {\n  return result.isError && !errorResetBoundary.isReset() && !result.isFetching && query && (suspense && result.data === void 0 || shouldThrowError(throwOnError, [result.error, query]));\n};\nexport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n};\n//# sourceMappingURL=errorBoundaryUtils.js.map","// src/suspense.ts\nvar defaultThrowOnError = (_error, query) => query.state.data === void 0;\nvar ensureSuspenseTimers = (defaultedOptions) => {\n  if (defaultedOptions.suspense) {\n    const clamp = (value) => value === \"static\" ? value : Math.max(value ?? 1e3, 1e3);\n    const originalStaleTime = defaultedOptions.staleTime;\n    defaultedOptions.staleTime = typeof originalStaleTime === \"function\" ? (...args) => clamp(originalStaleTime(...args)) : clamp(originalStaleTime);\n    if (typeof defaultedOptions.gcTime === \"number\") {\n      defaultedOptions.gcTime = Math.max(defaultedOptions.gcTime, 1e3);\n    }\n  }\n};\nvar willFetch = (result, isRestoring) => result.isLoading && result.isFetching && !isRestoring;\nvar shouldSuspend = (defaultedOptions, result) => defaultedOptions?.suspense && result.isPending;\nvar fetchOptimistic = (defaultedOptions, observer, errorResetBoundary) => observer.fetchOptimistic(defaultedOptions).catch(() => {\n  errorResetBoundary.clearReset();\n});\nexport {\n  defaultThrowOnError,\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n};\n//# sourceMappingURL=suspense.js.map","\"use client\";\n\n// src/useBaseQuery.ts\nimport * as React from \"react\";\nimport { isServer, noop, notifyManager } from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nimport { useQueryErrorResetBoundary } from \"./QueryErrorResetBoundary.js\";\nimport {\n  ensurePreventErrorBoundaryRetry,\n  getHasError,\n  useClearResetErrorBoundary\n} from \"./errorBoundaryUtils.js\";\nimport { useIsRestoring } from \"./IsRestoringProvider.js\";\nimport {\n  ensureSuspenseTimers,\n  fetchOptimistic,\n  shouldSuspend,\n  willFetch\n} from \"./suspense.js\";\nfunction useBaseQuery(options, Observer, queryClient) {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (typeof options !== \"object\" || Array.isArray(options)) {\n      throw new Error(\n        'Bad argument type. Starting with v5, only the \"Object\" form is allowed when calling query related functions. Please use the error stack to find the culprit call. More info here: https://tanstack.com/query/latest/docs/react/guides/migrating-to-v5#supports-a-single-signature-one-object'\n      );\n    }\n  }\n  const isRestoring = useIsRestoring();\n  const errorResetBoundary = useQueryErrorResetBoundary();\n  const client = useQueryClient(queryClient);\n  const defaultedOptions = client.defaultQueryOptions(options);\n  client.getDefaultOptions().queries?._experimental_beforeQuery?.(\n    defaultedOptions\n  );\n  if (process.env.NODE_ENV !== \"production\") {\n    if (!defaultedOptions.queryFn) {\n      console.error(\n        `[${defaultedOptions.queryHash}]: No queryFn was passed as an option, and no default queryFn was found. The queryFn parameter is only optional when using a default queryFn. More info here: https://tanstack.com/query/latest/docs/framework/react/guides/default-query-function`\n      );\n    }\n  }\n  defaultedOptions._optimisticResults = isRestoring ? \"isRestoring\" : \"optimistic\";\n  ensureSuspenseTimers(defaultedOptions);\n  ensurePreventErrorBoundaryRetry(defaultedOptions, errorResetBoundary);\n  useClearResetErrorBoundary(errorResetBoundary);\n  const isNewCacheEntry = !client.getQueryCache().get(defaultedOptions.queryHash);\n  const [observer] = React.useState(\n    () => new Observer(\n      client,\n      defaultedOptions\n    )\n  );\n  const result = observer.getOptimisticResult(defaultedOptions);\n  const shouldSubscribe = !isRestoring && options.subscribed !== false;\n  React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => {\n        const unsubscribe = shouldSubscribe ? observer.subscribe(notifyManager.batchCalls(onStoreChange)) : noop;\n        observer.updateResult();\n        return unsubscribe;\n      },\n      [observer, shouldSubscribe]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  React.useEffect(() => {\n    observer.setOptions(defaultedOptions);\n  }, [defaultedOptions, observer]);\n  if (shouldSuspend(defaultedOptions, result)) {\n    throw fetchOptimistic(defaultedOptions, observer, errorResetBoundary);\n  }\n  if (getHasError({\n    result,\n    errorResetBoundary,\n    throwOnError: defaultedOptions.throwOnError,\n    query: client.getQueryCache().get(defaultedOptions.queryHash),\n    suspense: defaultedOptions.suspense\n  })) {\n    throw result.error;\n  }\n  ;\n  client.getDefaultOptions().queries?._experimental_afterQuery?.(\n    defaultedOptions,\n    result\n  );\n  if (defaultedOptions.experimental_prefetchInRender && !isServer && willFetch(result, isRestoring)) {\n    const promise = isNewCacheEntry ? (\n      // Fetch immediately on render in order to ensure `.promise` is resolved even if the component is unmounted\n      fetchOptimistic(defaultedOptions, observer, errorResetBoundary)\n    ) : (\n      // subscribe to the \"cache promise\" so that we can finalize the currentThenable once data comes in\n      client.getQueryCache().get(defaultedOptions.queryHash)?.promise\n    );\n    promise?.catch(noop).finally(() => {\n      observer.updateResult();\n    });\n  }\n  return !defaultedOptions.notifyOnChangeProps ? observer.trackResult(result) : result;\n}\nexport {\n  useBaseQuery\n};\n//# sourceMappingURL=useBaseQuery.js.map","\"use client\";\n\n// src/useQuery.ts\nimport { QueryObserver } from \"@tanstack/query-core\";\nimport { useBaseQuery } from \"./useBaseQuery.js\";\nfunction useQuery(options, queryClient) {\n  return useBaseQuery(options, QueryObserver, queryClient);\n}\nexport {\n  useQuery\n};\n//# sourceMappingURL=useQuery.js.map","import * as React from \"react\";\nfunction ArrowsUpDownIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 7.5 7.5 3m0 0L12 7.5M7.5 3v13.5m13.5 0L16.5 21m0 0L12 16.5m4.5 4.5V7.5\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowsUpDownIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CloudArrowUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CloudArrowUpIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PencilIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PencilIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PhotoIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PhotoIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction PlusIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 4.5v15m7.5-7.5h-15\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(PlusIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction StarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(StarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction StarIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(StarIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    fill: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z\",\n    clipRule: \"evenodd\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import React, { useState } from 'react';\nimport { PlusIcon, TrashIcon } from '@heroicons/react/24/outline';\nimport { CustomField } from '@/types';\n\ninterface DynamicFieldManagerProps {\n  fields: CustomField[];\n  onChange: (fields: CustomField[]) => void;\n  label?: string;\n  placeholder?: {\n    label: string;\n    value: string;\n  };\n}\n\nconst DynamicFieldManager: React.FC<DynamicFieldManagerProps> = ({\n  fields,\n  onChange,\n  label = '自訂欄位',\n  placeholder = { label: '欄位名稱', value: '欄位內容' }\n}) => {\n  const handleAddField = () => {\n    const newField: CustomField = {\n      id: Date.now().toString(),\n      label: '',\n      value: ''\n    };\n    onChange([...fields, newField]);\n  };\n\n  const handleRemoveField = (id: string) => {\n    onChange(fields.filter(field => field.id !== id));\n  };\n\n  const handleFieldChange = (id: string, key: 'label' | 'value', value: string) => {\n    onChange(\n      fields.map(field =>\n        field.id === id ? { ...field, [key]: value } : field\n      )\n    );\n  };\n\n  return (\n    <div>\n      <div className=\"flex items-center justify-between mb-3\">\n        <label className=\"block text-sm font-medium text-gray-700\">\n          {label}\n        </label>\n        <button\n          type=\"button\"\n          onClick={handleAddField}\n          className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm leading-4 font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n        >\n          <PlusIcon className=\"h-4 w-4 mr-1\" />\n          新增欄位\n        </button>\n      </div>\n\n      <div className=\"space-y-3\">\n        {fields.map((field) => (\n          <div key={field.id} className=\"flex space-x-2\">\n            <input\n              type=\"text\"\n              value={field.label}\n              onChange={(e) => handleFieldChange(field.id!, 'label', e.target.value)}\n              placeholder={placeholder.label}\n              className=\"flex-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm\"\n            />\n            <input\n              type=\"text\"\n              value={field.value}\n              onChange={(e) => handleFieldChange(field.id!, 'value', e.target.value)}\n              placeholder={placeholder.value}\n              className=\"flex-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm\"\n            />\n            <button\n              type=\"button\"\n              onClick={() => handleRemoveField(field.id!)}\n              className=\"inline-flex items-center p-2 border border-transparent rounded-md text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\n            >\n              <TrashIcon className=\"h-5 w-5\" />\n            </button>\n          </div>\n        ))}\n\n        {fields.length === 0 && (\n          <div className=\"text-center py-6 bg-gray-50 rounded-md\">\n            <p className=\"text-sm text-gray-500\">尚未新增任何自訂欄位</p>\n            <p className=\"text-xs text-gray-400 mt-1\">點擊上方按鈕開始新增</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default DynamicFieldManager;","import React, { useState, useCallback, useEffect } from 'react';\nimport { \n  PhotoIcon, \n  CloudArrowUpIcon, \n  TrashIcon,\n  ArrowsUpDownIcon,\n  XMarkIcon,\n  CheckCircleIcon,\n  ExclamationCircleIcon\n} from '@heroicons/react/24/outline';\nimport { StarIcon } from '@heroicons/react/24/solid';\nimport projectService from '@/services/project.service';\nimport { ProjectImage } from '@/types';\nimport { getImageUrl, getMediumImageUrl, getThumbnailUrl } from '@/utils/image';\nimport toast from 'react-hot-toast';\nimport clsx from 'clsx';\n\ninterface ProjectImageManagerProps {\n  projectUuid?: string;\n  images: ProjectImage[];\n  onImagesChange: (images: ProjectImage[]) => void;\n  imageType?: 'main' | 'gallery' | 'floor_plan' | 'location' | 'vr';\n  maxFiles?: number;\n}\n\nconst ProjectImageManager: React.FC<ProjectImageManagerProps> = ({\n  projectUuid,\n  images = [],\n  onImagesChange,\n  imageType = 'gallery',\n  maxFiles = 10\n}) => {\n  const [uploading, setUploading] = useState(false);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [selectedImages, setSelectedImages] = useState<number[]>([]);\n  const [draggedImage, setDraggedImage] = useState<number | null>(null);\n  const [previewImages, setPreviewImages] = useState<Array<{ file: File; preview: string }>>([]);\n\n  // Clean up preview URLs on unmount\n  useEffect(() => {\n    return () => {\n      previewImages.forEach(img => URL.revokeObjectURL(img.preview));\n    };\n  }, [previewImages]);\n\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = Array.from(e.target.files || []);\n    \n    if (files.length + images.length > maxFiles) {\n      toast.error(`最多只能上傳 ${maxFiles} 張圖片`);\n      return;\n    }\n\n    // Create preview URLs\n    const newPreviews = files.map(file => ({\n      file,\n      preview: URL.createObjectURL(file)\n    }));\n\n    setPreviewImages(prev => [...prev, ...newPreviews]);\n  }, [images.length, maxFiles]);\n\n  const removePreview = useCallback((index: number) => {\n    setPreviewImages(prev => {\n      const newPreviews = [...prev];\n      URL.revokeObjectURL(newPreviews[index].preview);\n      newPreviews.splice(index, 1);\n      return newPreviews;\n    });\n  }, []);\n\n  const handleUpload = useCallback(async () => {\n    if (!projectUuid || previewImages.length === 0) return;\n\n    setUploading(true);\n    setUploadProgress(0);\n\n    try {\n      const files = previewImages.map(p => p.file);\n      const response = await projectService.uploadImages(\n        projectUuid,\n        files,\n        imageType,\n        undefined,\n        (progress) => setUploadProgress(progress)\n      );\n\n      if (response.success && response.data) {\n        const uploadedCount = response.data.uploaded?.length || 0;\n        const failedCount = response.data.failed?.length || 0;\n        \n        if (uploadedCount > 0) {\n          toast.success(`成功上傳 ${uploadedCount} 張圖片`);\n        }\n        \n        // Clean up previews\n        previewImages.forEach(img => URL.revokeObjectURL(img.preview));\n        setPreviewImages([]);\n        \n        // Fetch updated images list\n        const imagesResponse = await projectService.getProject(projectUuid);\n        if (imagesResponse.success && imagesResponse.data?.project.images) {\n          onImagesChange(imagesResponse.data.project.images);\n        }\n        \n        if (failedCount > 0) {\n          toast.error(`${failedCount} 張圖片上傳失敗`);\n        }\n      }\n    } catch (error) {\n      toast.error('圖片上傳失敗');\n      console.error('Upload error:', error);\n    } finally {\n      setUploading(false);\n      setUploadProgress(0);\n    }\n  }, [projectUuid, previewImages, imageType, images, onImagesChange]);\n\n  const handleDelete = useCallback(async (imageId: number) => {\n    if (!projectUuid) return;\n\n    try {\n      await projectService.deleteImage(projectUuid, imageId);\n      toast.success('圖片已刪除');\n      onImagesChange(images.filter(img => img.id !== imageId));\n      setSelectedImages(prev => prev.filter(id => id !== imageId));\n    } catch (error) {\n      toast.error('刪除圖片失敗');\n    }\n  }, [projectUuid, images, onImagesChange]);\n\n  const handleSetMain = useCallback(async (imageId: number) => {\n    if (!projectUuid) return;\n\n    try {\n      await projectService.setMainImage(projectUuid, imageId);\n      toast.success('已設為主圖');\n      \n      // Update local state to reflect the change\n      const updatedImages = images.map(img => ({\n        ...img,\n        image_type: img.id === imageId ? 'main' : (img.image_type === 'main' ? 'gallery' : img.image_type)\n      })) as ProjectImage[];\n      \n      onImagesChange(updatedImages);\n    } catch (error) {\n      toast.error('設定主圖失敗');\n    }\n  }, [projectUuid, images, onImagesChange]);\n\n  const handleDragStart = (e: React.DragEvent, imageId: number) => {\n    setDraggedImage(imageId);\n    e.dataTransfer.effectAllowed = 'move';\n  };\n\n  const handleDragOver = (e: React.DragEvent) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n  };\n\n  const handleDrop = async (e: React.DragEvent, targetId: number) => {\n    e.preventDefault();\n    \n    if (!draggedImage || draggedImage === targetId || !projectUuid) return;\n\n    const draggedIndex = images.findIndex(img => img.id === draggedImage);\n    const targetIndex = images.findIndex(img => img.id === targetId);\n\n    if (draggedIndex === -1 || targetIndex === -1) return;\n\n    // Create new order\n    const newImages = [...images];\n    const [removed] = newImages.splice(draggedIndex, 1);\n    newImages.splice(targetIndex, 0, removed);\n\n    // Update display orders\n    const orders = newImages.map((img, index) => ({\n      id: img.id,\n      display_order: index\n    }));\n\n    try {\n      await projectService.reorderImages(projectUuid, orders);\n      onImagesChange(newImages.map((img, index) => ({ ...img, display_order: index })));\n      toast.success('圖片順序已更新');\n    } catch (error) {\n      toast.error('更新順序失敗');\n    }\n\n    setDraggedImage(null);\n  };\n\n  const toggleImageSelection = (imageId: number) => {\n    setSelectedImages(prev => \n      prev.includes(imageId) \n        ? prev.filter(id => id !== imageId)\n        : [...prev, imageId]\n    );\n  };\n\n  const handleBulkDelete = async () => {\n    if (selectedImages.length === 0 || !projectUuid) return;\n\n    if (!confirm(`確定要刪除 ${selectedImages.length} 張圖片嗎？`)) return;\n\n    try {\n      // Delete images one by one (could be optimized with bulk endpoint)\n      await Promise.all(selectedImages.map(id => projectService.deleteImage(projectUuid, id)));\n      \n      toast.success(`已刪除 ${selectedImages.length} 張圖片`);\n      onImagesChange(images.filter(img => !selectedImages.includes(img.id)));\n      setSelectedImages([]);\n    } catch (error) {\n      toast.error('刪除圖片失敗');\n    }\n  };\n\n  const mainImage = images.find(img => img.image_type === 'main');\n  const galleryImages = images.filter(img => img.image_type !== 'main');\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Upload Section */}\n      <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4\">\n        <div className=\"text-center\">\n          <CloudArrowUpIcon className=\"mx-auto h-10 w-10 text-gray-400\" />\n          <div className=\"mt-3\">\n            <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n              <span className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\">\n                選擇圖片\n              </span>\n              <input\n                id=\"file-upload\"\n                type=\"file\"\n                className=\"sr-only\"\n                multiple\n                accept=\"image/*\"\n                onChange={handleFileSelect}\n                disabled={uploading}\n              />\n            </label>\n            <p className=\"mt-1 text-xs text-gray-500\">\n              支援 JPG、PNG、GIF、WebP 格式，最多 {maxFiles} 張\n            </p>\n          </div>\n        </div>\n\n        {/* Preview Section */}\n        {previewImages.length > 0 && (\n          <div className=\"mt-4\">\n            <div className=\"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4\">\n              {previewImages.map((preview, index) => (\n                <div key={index} className=\"relative group\">\n                  <img\n                    src={preview.preview}\n                    alt={`Preview ${index + 1}`}\n                    className=\"h-32 w-full object-scale-down rounded-lg border border-gray-100\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => removePreview(index)}\n                    className=\"absolute top-1 right-1 p-1 bg-red-600 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity\"\n                  >\n                    <XMarkIcon className=\"h-4 w-4\" />\n                  </button>\n                </div>\n              ))}\n            </div>\n            \n            <div className=\"mt-4 flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500\">\n                已設定 {previewImages.length} 張圖片\n              </span>\n              <button\n                type=\"button\"\n                onClick={handleUpload}\n                disabled={uploading || !projectUuid}\n                className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n              >\n                {uploading ? '上傳中...' : '開始上傳'}\n              </button>\n            </div>\n\n            {uploading && (\n              <div className=\"mt-2\">\n                <div className=\"bg-gray-200 rounded-full overflow-hidden\">\n                  <div \n                    className=\"bg-primary-600 h-2 transition-all duration-300\"\n                    style={{ width: `${uploadProgress}%` }}\n                  />\n                </div>\n                <p className=\"mt-1 text-sm text-gray-500 text-center\">{uploadProgress}%</p>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* Actions Bar */}\n      {images.length > 0 && (\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-2\">\n            {selectedImages.length > 0 && (\n              <>\n                <span className=\"text-sm text-gray-500\">\n                  已選擇 {selectedImages.length} 張\n                </span>\n                <button\n                  type=\"button\"\n                  onClick={handleBulkDelete}\n                  className=\"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700\"\n                >\n                  <TrashIcon className=\"h-4 w-4 mr-1\" />\n                  刪除選中\n                </button>\n              </>\n            )}\n          </div>\n          <p className=\"text-sm text-gray-500\">\n            共 {images.length} 張圖片\n          </p>\n        </div>\n      )}\n      <div className='grid grid-cols-1 md:grid-cols-2 gap-4'>\n      {/* Main Image */}\n      {mainImage && (\n        <div className=\"mb-6 md:mb-0\">\n          <h4 className=\"text-sm font-medium text-gray-700 mb-2\">主圖</h4>\n          <div className=\"relative group bg-slate-50 overflow-hidden\">\n            <img\n              src={getImageUrl(mainImage.file_path)}\n              alt={mainImage.alt_text || '主圖'}\n              className=\"w-full aspect-square object-scale-down rounded-lg\"\n            />\n            <div className=\"absolute top-2 left-2\">\n              <span className=\"inline-flex items-center px-2 py-1 text-xs font-medium rounded-md bg-yellow-100 text-yellow-800\">\n                <StarIcon className=\"h-3 w-3 mr-1\" />\n                主圖\n              </span>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Gallery Images */}\n      {galleryImages.length > 0 && (\n        <div>\n          <h4 className=\"text-sm font-medium text-gray-700 mb-2\">相簿圖片</h4>\n          <div className=\"grid grid-cols-2 gap-4\">\n            {galleryImages.map((image) => (\n              <div\n                key={image.id}\n                className={clsx(\n                  'relative group',\n                  selectedImages.includes(image.id) && 'ring-2 ring-primary-500 rounded-lg'\n                )}\n                draggable\n                onDragStart={(e) => handleDragStart(e, image.id)}\n                onDragOver={handleDragOver}\n                onDrop={(e) => handleDrop(e, image.id)}\n              >\n                <img\n                  src={getMediumImageUrl(image)}\n                  alt={image.alt_text || `圖片 ${image.id}`}\n                  className=\"h-32 w-full object-scale-down rounded-lg cursor-move border border-gray-100\"\n                  onClick={() => toggleImageSelection(image.id)}\n                />\n                \n                {/* Selection Indicator */}\n                {selectedImages.includes(image.id) && (\n                  <div className=\"absolute top-2 left-2\">\n                    <CheckCircleIcon className=\"h-6 w-6 text-primary-500 bg-white rounded-full\" />\n                  </div>\n                )}\n\n                {/* Actions */}\n                <div className=\"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center space-x-2\">\n                  <button\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleSetMain(image.id);\n                    }}\n                    className=\"p-2 bg-white rounded-full text-gray-700 hover:bg-gray-100\"\n                    title=\"設為主圖\"\n                  >\n                    <StarIcon className=\"h-4 w-4\" />\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDelete(image.id);\n                    }}\n                    className=\"p-2 bg-white rounded-full text-red-600 hover:bg-red-50\"\n                    title=\"刪除\"\n                  >\n                    <TrashIcon className=\"h-4 w-4\" />\n                  </button>\n                </div>\n\n                {/* Drag Indicator */}\n                <div className=\"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                  <ArrowsUpDownIcon className=\"h-4 w-4 text-white\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n      </div>\n\n      {/* Empty State */}\n      {images.length === 0 && previewImages.length === 0 && (\n        <div className=\"text-center py-4\">\n          <PhotoIcon className=\"mx-auto h-10 w-10 text-gray-400\" />\n          <p className=\"mt-2 text-sm text-gray-500\">尚未上傳任何圖片</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProjectImageManager;","import React, { useState, useRef, useEffect } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { XMarkIcon } from '@heroicons/react/24/solid';\nimport { PlusIcon } from '@heroicons/react/24/outline';\nimport tagService from '@/services/tag.service';\nimport { Tag } from '@/types';\nimport LoadingSpinner from './LoadingSpinner';\n\ninterface TagSelectorProps {\n  value: string[];\n  onChange: (tags: string[]) => void;\n  placeholder?: string;\n  className?: string;\n  disabled?: boolean;\n}\n\nconst TagSelector: React.FC<TagSelectorProps> = ({\n  value = [],\n  onChange,\n  placeholder = '輸入標籤名稱或選擇現有標籤',\n  className = '',\n  disabled = false,\n}) => {\n  const [inputValue, setInputValue] = useState('');\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [selectedTags, setSelectedTags] = useState<string[]>(value);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // 查詢所有標籤\n  const { data: tagsData, isLoading } = useQuery({\n    queryKey: ['tags', inputValue],\n    queryFn: () => tagService.getTags({ search: inputValue }),\n    enabled: showDropdown,\n  });\n\n  const availableTags = tagsData?.data?.items || [];\n\n  // 同步外部 value 變化\n  useEffect(() => {\n    setSelectedTags(value);\n  }, [value]);\n\n  // 點擊外部關閉下拉選單\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (\n        dropdownRef.current &&\n        !dropdownRef.current.contains(event.target as Node) &&\n        inputRef.current &&\n        !inputRef.current.contains(event.target as Node)\n      ) {\n        setShowDropdown(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  const handleAddTag = (tagName: string) => {\n    const trimmedTag = tagName.trim();\n    if (trimmedTag && !selectedTags.includes(trimmedTag)) {\n      const newTags = [...selectedTags, trimmedTag];\n      setSelectedTags(newTags);\n      onChange(newTags);\n      setInputValue('');\n      setShowDropdown(false);\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    const newTags = selectedTags.filter(tag => tag !== tagToRemove);\n    setSelectedTags(newTags);\n    onChange(newTags);\n  };\n\n  const handleInputKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === 'Enter') {\n      e.preventDefault();\n      if (inputValue.trim()) {\n        handleAddTag(inputValue);\n      }\n    } else if (e.key === 'Backspace' && !inputValue && selectedTags.length > 0) {\n      // 刪除最後一個標籤\n      handleRemoveTag(selectedTags[selectedTags.length - 1]);\n    }\n  };\n\n  const handleTagClick = (tag: Tag) => {\n    handleAddTag(tag.name);\n  };\n\n  // 過濾已選擇的標籤\n  const filteredTags = availableTags.filter(\n    tag => !selectedTags.includes(tag.name)\n  );\n\n  // 檢查輸入值是否為新標籤\n  const isNewTag = inputValue.trim() && \n    !availableTags.some(tag => tag.name.toLowerCase() === inputValue.trim().toLowerCase());\n\n  return (\n    <div className={`relative ${className}`}>\n      <div className=\"flex flex-wrap gap-2 p-3 border border-gray-300 rounded-lg focus-within:border-primary-500 focus-within:ring-1 focus-within:ring-primary-500\">\n        {selectedTags.map((tag) => (\n          <span\n            key={tag}\n            className=\"inline-flex items-center gap-1 px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-full\"\n          >\n            {tag}\n            {!disabled && (\n              <button\n                type=\"button\"\n                onClick={() => handleRemoveTag(tag)}\n                className=\"hover:text-gray-900 focus:outline-none\"\n              >\n                <XMarkIcon className=\"h-3 w-3\" />\n              </button>\n            )}\n          </span>\n        ))}\n        <input\n          ref={inputRef}\n          type=\"text\"\n          value={inputValue}\n          onChange={(e) => setInputValue(e.target.value)}\n          onFocus={() => setShowDropdown(true)}\n          onKeyDown={handleInputKeyDown}\n          placeholder={selectedTags.length === 0 ? placeholder : ''}\n          disabled={disabled}\n          className=\"flex-1 min-w-[200px] outline-none bg-transparent text-sm\"\n        />\n      </div>\n\n      {showDropdown && !disabled && (\n        <div\n          ref={dropdownRef}\n          className=\"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto\"\n        >\n          {isLoading ? (\n            <div className=\"p-4 text-center\">\n              <LoadingSpinner size=\"small\" />\n            </div>\n          ) : (\n            <>\n              {isNewTag && (\n                <button\n                  type=\"button\"\n                  onClick={() => handleAddTag(inputValue)}\n                  className=\"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 border-b\"\n                >\n                  <PlusIcon className=\"h-4 w-4 text-primary-600\" />\n                  <span>新增標籤 「{inputValue}」</span>\n                </button>\n              )}\n              \n              {filteredTags.length > 0 ? (\n                <div className=\"py-1\">\n                  {filteredTags.map((tag) => (\n                    <button\n                      key={tag.id}\n                      type=\"button\"\n                      onClick={() => handleTagClick(tag)}\n                      className=\"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center justify-between\"\n                    >\n                      <span>{tag.name}</span>\n                      {tag.usage_count > 0 && (\n                        <span className=\"text-xs text-gray-500\">\n                          使用 {tag.usage_count} 次\n                        </span>\n                      )}\n                    </button>\n                  ))}\n                </div>\n              ) : (\n                !isNewTag && inputValue && (\n                  <div className=\"p-4 text-sm text-gray-500 text-center\">\n                    沒有找到相符的標籤\n                  </div>\n                )\n              )}\n            </>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TagSelector;","import React, { useEffect, useState, useCallback } from 'react';\nimport { useSearchParams } from 'react-router-dom';\nimport {\n  PlusIcon,\n  MagnifyingGlassIcon,\n  PencilIcon,\n  TrashIcon,\n  EyeIcon,\n  StarIcon,\n  PhotoIcon,\n  ArrowsUpDownIcon,\n  CloudArrowUpIcon,\n} from '@heroicons/react/24/outline';\nimport { StarIcon as StarIconSolid } from '@heroicons/react/24/solid';\nimport { Dialog } from '@headlessui/react';\nimport projectService from '@/services/project.service';\nimport LoadingSpinner from '@/components/Common/LoadingSpinner';\nimport DynamicFieldManager from '@/components/Admin/DynamicFieldManager';\nimport ProjectImageManager from '@/components/Admin/ProjectImageManager';\nimport TagSelector from '@/components/Common/TagSelector';\nimport { Project, ProjectFormData, ProjectFilters, ProjectImage } from '@/types';\nimport { LocalImage } from '@/components/Admin/ProjectImageUploader';\nimport { getImageUrl } from '@/utils/image';\nimport toast from 'react-hot-toast';\nimport clsx from 'clsx';\n\nconst AdminProjects: React.FC = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [totalPages, setTotalPages] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('');\n  const [selectedStatus, setSelectedStatus] = useState<string>('');\n  const [selectedDisplayPage, setSelectedDisplayPage] = useState<string>('');\n  const [showFeaturedOnly, setShowFeaturedOnly] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [editingProject, setEditingProject] = useState<Project | null>(null);\n  const [deleteConfirmId, setDeleteConfirmId] = useState<number | null>(null);\n  const [imageModalOpen, setImageModalOpen] = useState(false);\n  const [selectedProject, setSelectedProject] = useState<Project | null>(null);\n  const [projectImages, setProjectImages] = useState<ProjectImage[]>([]);\n  const [loadingImages, setLoadingImages] = useState(false);\n  const [formImages, setFormImages] = useState<ProjectImage[]>([]);\n  const [newImages, setNewImages] = useState<LocalImage[]>([]);\n  const [formData, setFormData] = useState<ProjectFormData>({\n    title: '',\n    subtitle: '',\n    category: undefined,\n    status: 'planning',\n    display_page: undefined,\n    location: '',\n    base_address: '',\n    year: new Date().getFullYear(),\n    area: '',\n    floor_plan_info: '',\n    unit_count: 0,\n    display_order: 0,\n    is_featured: false,\n    facebook_page: '',\n    booking_phone: '',\n    info_website: '',\n    description: '',\n    detail_content: '',\n    custom_fields: [],\n    tags: [],\n  });\n\n  // const categories = ['住宅', '商辦', '公共工程', '其他'];\n\n  useEffect(() => {\n    const filters: ProjectFilters = {\n      page: Number(searchParams.get('page')) || 1,\n      search: searchParams.get('search') || undefined,\n      category: searchParams.get('category') as Project['category'] || undefined,\n      status: searchParams.get('status') as Project['status'] || undefined,\n      display_page: searchParams.get('display_page') as Project['display_page'] || undefined,\n      is_featured: searchParams.get('is_featured') === 'true' ? true : undefined,\n    };\n\n    setCurrentPage(filters.page || 1);\n    setSearchTerm(filters.search || '');\n    setSelectedCategory(filters.category || '');\n    setSelectedStatus(filters.status || '');\n    setSelectedDisplayPage(filters.display_page || '');\n    setShowFeaturedOnly(filters.is_featured || false);\n\n    fetchProjects(filters);\n  }, [searchParams]);\n\n  const fetchProjects = async (filters: ProjectFilters) => {\n    try {\n      setLoading(true);\n      const response = await projectService.getProjects({\n        ...filters,\n        limit: 10,\n        orderBy: 'created_at',\n        orderDir: 'DESC',\n      });\n\n      if (response.success && response.data) {\n        setProjects(response.data.items);\n        setTotalPages(response.data.pagination.pages);\n      }\n    } catch (error) {\n      toast.error('無法載入專案列表');\n      console.error('Projects fetch error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateFilters = (newFilters: Partial<ProjectFilters>) => {\n    const params = new URLSearchParams();\n    \n    const filters = {\n      page: currentPage,\n      search: searchTerm,\n      category: selectedCategory,\n      status: selectedStatus,\n      display_page: selectedDisplayPage,\n      is_featured: showFeaturedOnly,\n      ...newFilters,\n    };\n\n    Object.entries(filters).forEach(([key, value]) => {\n      if (value && value !== '') {\n        params.set(key, String(value));\n      }\n    });\n\n    setSearchParams(params);\n  };\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    updateFilters({ search: searchTerm, page: 1 });\n  };\n\n  const handleCreateOrUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    try {\n      let projectUuid: string;\n      \n      if (editingProject) {\n        const response = await projectService.updateProject(editingProject.uuid, formData);\n        if (response.success) {\n          projectUuid = editingProject.uuid;\n          toast.success('專案已更新');\n        } else {\n          throw new Error('更新失敗');\n        }\n      } else {\n        const response = await projectService.createProject(formData);\n        if (response.success && response.data) {\n          projectUuid = response.data.project.uuid;\n          toast.success('專案已建立');\n        } else {\n          throw new Error('建立失敗');\n        }\n      }\n      \n      // 上傳新圖片\n      if (newImages.length > 0 && projectUuid) {\n        try {\n          const files = newImages.map(img => img.file);\n          const mainImageIndex = newImages.findIndex(img => img.isMain);\n          \n          const uploadResponse = await projectService.uploadImages(\n            projectUuid,\n            files,\n            'gallery'\n          );\n          \n          if (uploadResponse.success && uploadResponse.data?.uploaded) {\n            const uploadedImages = uploadResponse.data.uploaded;\n            // 如果有標記主圖，設定主圖；否則設定第一張為主圖\n            const mainIndex = mainImageIndex >= 0 ? mainImageIndex : 0;\n            if (uploadedImages[mainIndex]) {\n              await projectService.setMainImage(projectUuid, uploadedImages[mainIndex].id);\n            }\n          } else {\n            throw new Error('圖片上傳失敗');\n          }\n        } catch (imageError) {\n          console.error('Image upload error:', imageError);\n          toast.error('圖片上傳失敗，但專案已建立');\n        }\n      }\n      \n      setIsModalOpen(false);\n      setNewImages([]);\n      fetchProjects({ page: editingProject ? currentPage : 1 });\n    } catch (error) {\n      toast.error(editingProject ? '更新專案失敗' : '建立專案失敗');\n    }\n  };\n\n  const handleEdit = async (project: Project) => {\n    try {\n      // 先設定基本資料\n      setEditingProject(project);\n      setFormImages(project.images || []);\n      \n      // 重新獲取專案完整資訊，確保圖片資料是最新的\n      const response = await projectService.getProject(project.uuid);\n      if (response.success && response.data?.project.images) {\n        setFormImages(response.data.project.images);\n      }\n    } catch (error) {\n      console.error('Failed to fetch project details:', error);\n      // 如果獲取失敗，仍然使用原有的圖片資料\n      setFormImages(project.images || []);\n    }\n    \n    setFormData({\n      title: project.title,\n      subtitle: project.subtitle || '',\n      category: project.category,\n      status: project.status,\n      display_page: project.display_page,\n      location: project.location,\n      base_address: project.base_address || '',\n      year: project.year || new Date().getFullYear(),\n      area: project.area || '',\n      floor_plan_info: project.floor_plan_info || '',\n      unit_count: project.unit_count || 0,\n      display_order: project.display_order,\n      is_featured: project.is_featured,\n      facebook_page: project.facebook_page || '',\n      booking_phone: project.booking_phone || '',\n      info_website: project.info_website || '',\n      description: project.description || '',\n      detail_content: project.detail_content || '',\n      meta_title: project.meta_title || '',\n      meta_description: project.meta_description || '',\n      custom_fields: project.custom_fields || [],\n      tags: project.tags?.map(tag => typeof tag === 'string' ? tag : tag.name) || [],\n    });\n    setIsModalOpen(true);\n  };\n\n  const handleDelete = async (id: number) => {\n    if (deleteConfirmId !== id) {\n      setDeleteConfirmId(id);\n      return;\n    }\n\n    try {\n      const project = projects.find(p => p.id === id);\n      if (project) {\n        await projectService.deleteProject(project.uuid);\n        toast.success('專案已刪除');\n        fetchProjects({ page: currentPage });\n      }\n    } catch (error) {\n      toast.error('刪除專案失敗');\n    } finally {\n      setDeleteConfirmId(null);\n    }\n  };\n\n  const handleToggleFeatured = async (project: Project) => {\n    try {\n      await projectService.toggleProjectFeatured(project.uuid);\n      toast.success(project.is_featured ? '已取消精選' : '已設為精選');\n      fetchProjects({ page: currentPage });\n    } catch (error) {\n      toast.error('操作失敗');\n    }\n  };\n\n  const openCreateModal = () => {\n    setEditingProject(null);\n    setFormImages([]);\n    setNewImages([]);\n    setFormData({\n      title: '',\n      subtitle: '',\n      category: undefined,\n      status: 'planning',\n      display_page: undefined,\n      location: '',\n      base_address: '',\n      year: new Date().getFullYear(),\n      area: '',\n      floor_plan_info: '',\n      unit_count: 0,\n      display_order: 0,\n      is_featured: false,\n      facebook_page: '',\n      booking_phone: '',\n      info_website: '',\n      description: '',\n      detail_content: '',\n      custom_fields: [],\n      tags: [],\n    });\n    setIsModalOpen(true);\n  };\n\n  if (loading && projects.length === 0) {\n    return (\n      <div className=\"flex justify-center items-center min-h-[60vh]\">\n        <LoadingSpinner size=\"large\" />\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      <div className=\"sm:flex sm:items-center sm:justify-between mb-6\">\n        <div>\n          <h1 className=\"text-3xl font-bold text-gray-900\">專案管理</h1>\n          <p className=\"mt-2 text-gray-600\">管理所有建案專案資訊</p>\n        </div>\n        <button\n          onClick={openCreateModal}\n          className=\"mt-4 sm:mt-0 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n        >\n          <PlusIcon className=\"h-5 w-5 mr-2\" />\n          新增專案\n        </button>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white shadow rounded-lg p-6 mb-6\">\n        <form onSubmit={handleSearch} className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n            <div>\n              <label htmlFor=\"search\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                搜尋專案\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                <input\n                  type=\"text\"\n                  id=\"search\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full h-12 !pr-12 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                  placeholder=\"輸入專案名稱...\"\n                />\n                <div className=\"absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none\">\n                  <MagnifyingGlassIcon className=\"h-5 w-5 text-primary-more\" />\n                </div>\n              </div>\n            </div>\n\n            {/* Category filter hidden - removed from filters */}\n\n            {/* Status filter hidden - removed from filters */}\n\n            <div>\n              <label htmlFor=\"display_page\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                上架頁面\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                <select\n                  id=\"display_page\"\n                  value={selectedDisplayPage}\n                  onChange={(e) => {\n                    setSelectedDisplayPage(e.target.value);\n                    updateFilters({ display_page: e.target.value as Project['display_page'], page: 1 });\n                  }}\n                  className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none appearance-none\"\n                >\n                  <option value=\"\">全部頁面</option>\n                  <option value=\"開發專區\">開發專區</option>\n                  <option value=\"澤暘作品\">澤暘作品</option>\n                </select>\n                <div className=\"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none\">\n                  <svg className=\"w-5 h-5 text-primary-more\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                  </svg>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center\">\n              <label className=\"inline-flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  checked={showFeaturedOnly}\n                  onChange={(e) => {\n                    setShowFeaturedOnly(e.target.checked);\n                    updateFilters({ is_featured: e.target.checked, page: 1 });\n                  }}\n                  className=\"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50\"\n                />\n                <span className=\"ml-2 text-sm text-gray-700\">僅顯示精選</span>\n              </label>\n            </div>\n          </div>\n\n          <div className=\"flex justify-end\">\n            <button\n              type=\"submit\"\n              className=\"bg-primary-more text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors\"\n            >\n              搜尋\n            </button>\n          </div>\n        </form>\n      </div>\n\n      {/* Projects Table */}\n      <div className=\"bg-white shadow overflow-hidden sm:rounded-md\">\n        <ul className=\"divide-y divide-gray-200\">\n          {projects.map((project) => (\n            <li key={project.id}>\n              <div className=\"px-4 py-4 sm:px-6 hover:bg-gray-50\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center\">\n                    {project.image_count && project.main_image ? (\n                      <div className='h-12 w-12 bg-gray-200 rounded mr-4'>\n                        <img\n                          src={getImageUrl(project.main_image.file_path)}\n                          alt=\"主圖\"\n                          className=\"w-full aspect-square object-scale-down rounded-lg\"\n                        />\n                      </div>\n                    ) : (\n                      <PhotoIcon className=\"h-12 w-12 text-gray-400 mr-4\" />\n                    )}\n                    <div>\n                      <div className=\"flex items-center\">\n                        <p className=\"text-sm font-medium text-primary-600 truncate\">\n                          {project.title}\n                        </p>\n                      </div>\n                      <div className=\"mt-1 flex items-center text-sm text-gray-500\">\n                        <span className=\"truncate\">{project.location}</span>\n                        <span className=\"mx-2\">•</span>\n                        <span className=\"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800\">\n                          {/* {statuses.find(s => s.value === project.status)?.label || project.status} */}\n                          {project.display_page}\n                        </span>\n                      </div>\n                      <div className=\"mt-1 flex items-center text-sm text-gray-500\">\n                        <EyeIcon className=\"h-4 w-4 mr-1\" />\n                        {project.view_count} 瀏覽\n                        <span className=\"mx-2\">•</span>\n                        <span>建立於 {new Date(project.created_at).toLocaleDateString()}</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <button\n                      onClick={() => handleToggleFeatured(project)}\n                      className={clsx(\n                        'p-2 rounded-md transition-colors',\n                        project.is_featured\n                          ? 'text-yellow-600 hover:bg-yellow-50'\n                          : 'text-gray-400 hover:bg-gray-100'\n                      )}\n                      title={project.is_featured ? '取消精選' : '設為精選'}\n                    >\n                      <StarIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={async () => {\n                        setSelectedProject(project);\n                        setImageModalOpen(true);\n                        setLoadingImages(true);\n                        \n                        // 重新獲取專案完整資訊，包括最新的圖片列表\n                        try {\n                          const response = await projectService.getProject(project.uuid);\n                          if (response.success && response.data?.project.images) {\n                            setProjectImages(response.data.project.images);\n                          } else {\n                            setProjectImages([]);\n                          }\n                        } catch (error) {\n                          console.error('Failed to fetch project images:', error);\n                          toast.error('載入圖片失敗，顯示快取圖片');\n                          setProjectImages(project.images || []);\n                        } finally {\n                          setLoadingImages(false);\n                        }\n                      }}\n                      className=\"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-md\"\n                      title=\"管理圖片\"\n                    >\n                      <PhotoIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={() => handleEdit(project)}\n                      className=\"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-md\"\n                      title=\"編輯\"\n                    >\n                      <PencilIcon className=\"h-5 w-5\" />\n                    </button>\n                    <button\n                      onClick={() => handleDelete(project.id)}\n                      className={clsx(\n                        'p-2 rounded-md transition-colors',\n                        deleteConfirmId === project.id\n                          ? 'text-red-600 hover:bg-red-50'\n                          : 'text-gray-400 hover:text-gray-500 hover:bg-gray-100'\n                      )}\n                      title={deleteConfirmId === project.id ? '確認刪除' : '刪除'}\n                    >\n                      <TrashIcon className=\"h-5 w-5\" />\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n\n        {projects.length === 0 && !loading && (\n          <div className=\"text-center py-12\">\n            <p className=\"text-gray-500\">沒有找到符合條件的專案</p>\n          </div>\n        )}\n      </div>\n\n      {/* Pagination */}\n      {totalPages > 1 && (\n        <div className=\"mt-6 flex items-center justify-between\">\n          <div className=\"flex-1 flex justify-between sm:hidden\">\n            <button\n              onClick={() => updateFilters({ page: currentPage - 1 })}\n              disabled={currentPage === 1}\n              className=\"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              上一頁\n            </button>\n            <button\n              onClick={() => updateFilters({ page: currentPage + 1 })}\n              disabled={currentPage === totalPages}\n              className=\"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              下一頁\n            </button>\n          </div>\n          <div className=\"hidden sm:flex-1 sm:flex sm:items-center sm:justify-center\">\n            <nav className=\"relative z-0 inline-flex rounded-md shadow-sm -space-x-px\" aria-label=\"Pagination\">\n              {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                <button\n                  key={page}\n                  onClick={() => updateFilters({ page })}\n                  className={clsx(\n                    'relative inline-flex items-center px-4 py-2 border text-sm font-medium',\n                    page === currentPage\n                      ? 'z-10 bg-primary-50 border-primary-500 text-primary-600'\n                      : 'bg-white border-gray-300 text-gray-500 hover:bg-gray-50'\n                  )}\n                >\n                  {page}\n                </button>\n              ))}\n            </nav>\n          </div>\n        </div>\n      )}\n\n      {/* Create/Edit Modal */}\n      <Dialog open={isModalOpen} onClose={() => {\n        // 清理預覽 URL\n        newImages.forEach(img => URL.revokeObjectURL(img.preview));\n        setNewImages([]);\n        setIsModalOpen(false);\n      }} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-2xl w-full bg-white rounded-lg shadow-xl\" style={{ maxHeight: '75dvh' }}>\n            <div className=\"p-6 overflow-y-auto\" style={{ maxHeight: 'calc(75dvh - 2rem)' }}>\n              <Dialog.Title className=\"text-lg font-medium text-gray-900 mb-4\">\n                {editingProject ? '編輯專案' : '新增專案'}\n              </Dialog.Title>\n              \n              <form onSubmit={handleCreateOrUpdate} className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                  <div className=\"sm:col-span-2\">\n                    <label htmlFor=\"title\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                      專案名稱 *\n                    </label>\n                    <div className=\"relative\">\n                      <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                      <input\n                        type=\"text\"\n                        id=\"title\"\n                        required\n                        value={formData.title}\n                        onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                        className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                      />\n                    </div>\n                  </div>\n\n                  {formData.display_page !== '開發專區' && (\n                    <div className=\"!hidden sm:col-span-2\">\n                      <label htmlFor=\"subtitle\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        副標題\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-我more\"></div>\n                        <input\n                          type=\"text\"\n                          id=\"subtitle\"\n                          value={formData.subtitle}\n                          onChange={(e) => setFormData({ ...formData, subtitle: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Category field hidden - removed from form */}\n\n                  {/* Status field hidden - removed from form */}\n\n                  <div>\n                    <label htmlFor=\"display_page\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                      上架頁面 *\n                    </label>\n                    <div className=\"relative\">\n                      <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                      <select\n                        id=\"display_page\"\n                        required\n                        value={formData.display_page || ''}\n                        onChange={(e) => {\n                          const newDisplayPage = e.target.value as Project['display_page'];\n                          const updatedFormData = { ...formData, display_page: newDisplayPage };\n                          \n                          // 如果選擇開發專區，清空隱藏欄位並取消精選\n                          if (newDisplayPage === '開發專區') {\n                            updatedFormData.subtitle = '';\n                            updatedFormData.base_address = '';\n                            updatedFormData.year = new Date().getFullYear();\n                            updatedFormData.area = '';\n                            updatedFormData.floor_plan_info = '';\n                            updatedFormData.unit_count = 0;\n                            updatedFormData.description = '';\n                            updatedFormData.facebook_page = '';\n                            updatedFormData.booking_phone = '';\n                            updatedFormData.info_website = '';\n                            updatedFormData.custom_fields = [];\n                            updatedFormData.is_featured = false;\n                          }\n                          \n                          setFormData(updatedFormData);\n                        }}\n                        className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none appearance-none\"\n                      >\n                        <option value=\"\">選擇上架頁面</option>\n                        <option value=\"開發專區\">開發專區</option>\n                        <option value=\"澤暘作品\">澤暘作品</option>\n                      </select>\n                      <div className=\"absolute inset-y-0 right-0 flex items-center pr-4 pointer-events-none\">\n                        <svg className=\"w-5 h-5 text-primary-more\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                          <path fillRule=\"evenodd\" d=\"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                        </svg>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div>\n                    <label htmlFor=\"location\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                      地區位置 *\n                    </label>\n                    <div className=\"relative\">\n                      <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                      <input\n                        type=\"text\"\n                        id=\"location\"\n                        required\n                        value={formData.location}\n                        onChange={(e) => setFormData({ ...formData, location: e.target.value })}\n                        className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                      />\n                    </div>\n                  </div>\n\n                  {formData.display_page !== '開發專區' && (\n                    <div>\n                      <label htmlFor=\"base_address\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        基地地址\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"text\"\n                          id=\"base_address\"\n                          value={formData.base_address}\n                          onChange={(e) => setFormData({ ...formData, base_address: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div>\n                      <label htmlFor=\"year\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        年份\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"number\"\n                          id=\"year\"\n                          value={formData.year}\n                          onChange={(e) => setFormData({ ...formData, year: parseInt(e.target.value) })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div>\n                      <label htmlFor=\"area\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        面積\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"text\"\n                          id=\"area\"\n                          value={formData.area}\n                          onChange={(e) => setFormData({ ...formData, area: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div>\n                      <label htmlFor=\"floor_plan_info\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        樓層規劃\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"text\"\n                          id=\"floor_plan_info\"\n                          value={formData.floor_plan_info}\n                          onChange={(e) => setFormData({ ...formData, floor_plan_info: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                          placeholder=\"例：地上15層/地下3層\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div>\n                      <label htmlFor=\"unit_count\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        戶數\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"number\"\n                          id=\"unit_count\"\n                          min=\"0\"\n                          value={formData.unit_count || ''}\n                          onChange={(e) => {\n                            const value = e.target.value;\n                            let numValue = 0;\n                            if (value) {\n                              numValue = Math.max(0, parseInt(value) || 0);\n                            }\n                            setFormData({ ...formData, unit_count: numValue });\n                          }}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div>\n                      <label htmlFor=\"facebook_page\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        Facebook粉絲團\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"url\"\n                          id=\"facebook_page\"\n                          value={formData.facebook_page}\n                          onChange={(e) => setFormData({ ...formData, facebook_page: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                          placeholder=\"https://facebook.com/...\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div className=\"sm:col-span-2\">\n                      <label htmlFor=\"booking_phone\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        預約專線\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"tel\"\n                          id=\"booking_phone\"\n                          value={formData.booking_phone}\n                          onChange={(e) => setFormData({ ...formData, booking_phone: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                          placeholder=\"02-1234-5678\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div className=\"sm:col-span-2\">\n                      <label htmlFor=\"info_website\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        介紹網站\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <input\n                          type=\"url\"\n                          id=\"info_website\"\n                          value={formData.info_website}\n                          onChange={(e) => setFormData({ ...formData, info_website: e.target.value })}\n                          className=\"w-full h-12 !pr-4 !pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none\"\n                          placeholder=\"https://...\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  {formData.display_page !== '開發專區' && (\n                    <div className=\"!hidden sm:col-span-2\">\n                      <label htmlFor=\"description\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                        描述\n                      </label>\n                      <div className=\"relative\">\n                        <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                        <textarea\n                          id=\"description\"\n                          rows={3}\n                          value={formData.description}\n                          onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                          className=\"w-full px-4 py-3 pl-6 bg-gray-100 border-0 text-content-mobile lg:text-content-desktop focus:ring-0 focus:outline-none resize-none\"\n                        />\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"!hidden sm:col-span-2\">\n                    <label htmlFor=\"tags\" className=\"block text-content-mobile lg:text-content-desktop font-medium text-gray-700 mb-1 tracking-wider\">\n                      標籤\n                    </label>\n                    <div className=\"relative\">\n                      <div className=\"absolute left-0 top-0 bottom-0 w-[2px] bg-primary-more\"></div>\n                      <div className=\"pl-6\">\n                        <TagSelector\n                          value={formData.tags || []}\n                          onChange={(tags) => setFormData({ ...formData, tags })}\n                          placeholder=\"輸入標籤名稱或選擇現有標籤\"\n                        />\n                      </div>\n                    </div>\n                    <p className=\"mt-2 text-sm text-gray-500\">\n                      可以新增多個標籤，按 Enter 確認輸入\n                    </p>\n                  </div>\n\n                  {formData.display_page !== '開發專區' && (\n                    <div className=\"sm:col-span-2\">\n                      <DynamicFieldManager\n                        fields={formData.custom_fields ?? []}\n                        onChange={(fields) => setFormData({ ...formData, custom_fields: fields })}\n                        label=\"自訂欄位\"\n                      />\n                    </div>\n                  )}\n\n                  {/* 圖片管理區域 */}\n                  <div className=\"sm:col-span-2\">\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      專案圖片\n                    </label>\n                    \n                    {/* 統一的圖片上傳區 */}\n                    <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-4 mb-4\">\n                      <div className=\"text-center\">\n                        <CloudArrowUpIcon className=\"mx-auto h-10 w-10 text-gray-400\" />\n                        <div className=\"mt-3\">\n                          <label htmlFor=\"unified-image-upload\" className=\"cursor-pointer\">\n                            <span className=\"inline-flex items-center px-3 py-1.5 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700\">\n                              選擇圖片\n                            </span>\n                            <input\n                              id=\"unified-image-upload\"\n                              type=\"file\"\n                              className=\"sr-only\"\n                              multiple\n                              accept=\"image/*\"\n                              onChange={(e) => {\n                                if (e.target.files) {\n                                  const files = Array.from(e.target.files);\n                                  const totalImages = (formImages?.length || 0) + newImages.length;\n                                  \n                                  if (totalImages + files.length > 20) {\n                                    toast.error('最多只能上傳 20 張圖片');\n                                    return;\n                                  }\n\n                                  const newImageFiles = files.map((file, index) => ({\n                                    id: `local-${Date.now()}-${index}`,\n                                    file,\n                                    preview: URL.createObjectURL(file),\n                                    isMain: totalImages === 0 && index === 0 // 第一張圖片自動設為主圖\n                                  }));\n\n                                  setNewImages([...newImages, ...newImageFiles]);\n                                }\n                              }}\n                            />\n                          </label>\n                          <p className=\"mt-1 text-xs text-gray-500\">\n                            或拖放圖片到此處\n                          </p>\n                          <p className=\"text-xs text-gray-400\">\n                            支援 JPG、PNG、GIF、WebP，最多 20 張\n                          </p>\n                        </div>\n                      </div>\n                    </div>\n\n                    {/* 統一的圖片顯示區域 */}\n                    {((formImages && formImages.length > 0) || newImages.length > 0) && (\n                      <div>\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <p className=\"text-sm font-medium text-gray-700\">\n                            已選擇 {(formImages?.length || 0) + newImages.length} 張圖片\n                          </p>\n                        </div>\n                        \n                        <div className=\"grid grid-cols-4 gap-3\">\n                          {/* 顯示現有圖片 */}\n                          {formImages && formImages.map((image) => (\n                            <div key={`existing-${image.id}`} className=\"relative group\">\n                              <div className={`aspect-square border-2 rounded-lg overflow-hidden ${\n                                image.image_type === 'main' ? 'border-primary-line' : 'border-gray-200'\n                              }`}>\n                                <img\n                                  src={getImageUrl(image.file_path)}\n                                  alt={image.alt_text || ''}\n                                  className=\"w-full h-full object-scale-down\"\n                                />\n                              </div>\n                              \n                              {/* 主圖標示 */}\n                              {image.image_type === 'main' && (\n                                <div className=\"absolute top-1 left-1\">\n                                  <StarIconSolid className=\"h-5 w-5 text-primary-line\" />\n                                </div>\n                              )}\n\n                              {/* 操作按鈕 */}\n                              <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                                {image.image_type !== 'main' && editingProject && (\n                                  <button\n                                    type=\"button\"\n                                    onClick={async () => {\n                                      try {\n                                        await projectService.setMainImage(editingProject.uuid, image.id);\n                                        // 更新本地狀態\n                                        const updatedImages = formImages.map(img => ({\n                                          ...img,\n                                          image_type: img.id === image.id ? 'main' as const : (img.image_type === 'main' ? 'gallery' as const : img.image_type)\n                                        }));\n                                        setFormImages(updatedImages);\n                                        toast.success('已設為主圖');\n                                      } catch (error) {\n                                        toast.error('設定主圖失敗');\n                                      }\n                                    }}\n                                    className=\"p-1.5 bg-white rounded-full text-gray-700 hover:bg-gray-100 mr-1\"\n                                    title=\"設為主圖\"\n                                  >\n                                    <StarIcon className=\"h-4 w-4\" />\n                                  </button>\n                                )}\n                                {editingProject && (\n                                  <button\n                                    type=\"button\"\n                                    onClick={async () => {\n                                      try {\n                                        await projectService.deleteImage(editingProject.uuid, image.id);\n                                        setFormImages(formImages.filter(img => img.id !== image.id));\n                                        toast.success('圖片已刪除');\n                                      } catch (error) {\n                                        toast.error('刪除圖片失敗');\n                                      }\n                                    }}\n                                    className=\"p-1.5 bg-white rounded-full text-red-600 hover:bg-red-50\"\n                                    title=\"刪除\"\n                                  >\n                                    <TrashIcon className=\"h-4 w-4\" />\n                                  </button>\n                                )}\n                              </div>\n                            </div>\n                          ))}\n\n                          {/* 顯示新增圖片 */}\n                          {newImages.map((image, index) => (\n                            <div key={`new-${image.id}`} className=\"relative group\">\n                              <div className={`aspect-square border-2 rounded-lg overflow-hidden ${\n                                image.isMain ? 'border-primary-line' : 'border-gray-200'\n                              }`}>\n                                <img\n                                  src={image.preview}\n                                  alt={`新圖片 ${index + 1}`}\n                                  className=\"w-full h-full object-scale-down\"\n                                />\n                              </div>\n                              \n                              {/* 主圖標示 */}\n                              {image.isMain && (\n                                <div className=\"absolute top-1 left-1\">\n                                  <StarIconSolid className=\"h-5 w-5 text-primary-line\" />\n                                </div>\n                              )}\n\n                              {/* 操作按鈕 */}\n                              <div className=\"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-opacity rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100\">\n                                {!image.isMain && (\n                                  <button\n                                    type=\"button\"\n                                    onClick={() => {\n                                      const updatedImages = newImages.map(img => ({\n                                        ...img,\n                                        isMain: img.id === image.id\n                                      }));\n                                      setNewImages(updatedImages);\n                                    }}\n                                    className=\"p-1.5 bg-white rounded-full text-gray-700 hover:bg-gray-100 mr-1\"\n                                    title=\"設為主圖\"\n                                  >\n                                    <StarIcon className=\"h-4 w-4\" />\n                                  </button>\n                                )}\n                                <button\n                                  type=\"button\"\n                                  onClick={() => {\n                                    URL.revokeObjectURL(image.preview);\n                                    const remainingImages = newImages.filter(img => img.id !== image.id);\n                                    // 如果刪除的是主圖，將第一張設為主圖\n                                    if (image.isMain && remainingImages.length > 0) {\n                                      remainingImages[0].isMain = true;\n                                    }\n                                    setNewImages(remainingImages);\n                                  }}\n                                  className=\"p-1.5 bg-white rounded-full text-red-600 hover:bg-red-50\"\n                                  title=\"刪除\"\n                                >\n                                  <TrashIcon className=\"h-4 w-4\" />\n                                </button>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    )}\n                    \n                    {/* 空狀態 */}\n                    {(!formImages || formImages.length === 0) && newImages.length === 0 && (\n                      <div className=\"text-center py-4\">\n                        <PhotoIcon className=\"mx-auto h-10 w-10 text-gray-400\" />\n                        <p className=\"mt-2 text-sm text-gray-500\">尚未選擇任何圖片</p>\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"sm:col-span-2\">\n                    <label className=\"inline-flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        checked={formData.is_featured}\n                        disabled={formData.display_page === '開發專區'}\n                        onChange={(e) => setFormData({ ...formData, is_featured: e.target.checked })}\n                        className=\"rounded border-gray-300 text-primary-600 shadow-sm focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n                      />\n                      <span className={`ml-2 text-sm ${formData.display_page === '開發專區' ? 'text-gray-400' : 'text-gray-700'}`}>\n                        設為精選專案\n                        {formData.display_page === '開發專區' && <span className=\"text-xs block text-gray-400\">開發專區不可設為精選</span>}\n                      </span>\n                    </label>\n                  </div>\n                </div>\n\n                <div className=\"mt-6 flex justify-center space-x-4\">\n                  <button\n                    type=\"button\"\n                    onClick={() => {\n                      // 清理預覽 URL\n                      newImages.forEach(img => URL.revokeObjectURL(img.preview));\n                      setNewImages([]);\n                      setIsModalOpen(false);\n                    }}\n                    className=\"bg-gray-500 text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors\"\n                  >\n                    取消\n                  </button>\n                  <button\n                    type=\"submit\"\n                    className=\"bg-primary-more text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors\"\n                  >\n                    {editingProject ? '更新' : '建立'}\n                  </button>\n                </div>\n              </form>\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n\n      {/* Image Management Modal */}\n      <Dialog open={imageModalOpen} onClose={() => {\n        setImageModalOpen(false);\n        setLoadingImages(false);\n        setSelectedProject(null);\n        setProjectImages([]);\n      }} className=\"relative z-50\">\n        <div className=\"fixed inset-0 bg-black/30\" aria-hidden=\"true\" />\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"mx-auto max-w-4xl w-full bg-white rounded-lg shadow-xl\" style={{ maxHeight: '75dvh' }}>\n            <div className=\"p-6 overflow-y-auto\" style={{ maxHeight: 'calc(75dvh - 2rem)' }}>\n              <Dialog.Title className=\"text-lg font-medium text-gray-900 mb-4\">\n                {selectedProject?.title} - 圖片管理\n              </Dialog.Title>\n              \n              {loadingImages ? (\n                <div className=\"flex items-center justify-center py-8\">\n                  <LoadingSpinner size=\"medium\" />\n                  <span className=\"ml-2 text-gray-600\">載入圖片中...</span>\n                </div>\n              ) : (\n                <ProjectImageManager\n                  projectUuid={selectedProject?.uuid}\n                  images={projectImages}\n                  onImagesChange={(images) => {\n                    setProjectImages(images);\n                    // Update the project in the list\n                    if (selectedProject) {\n                      const updatedProjects = projects.map(p => \n                        p.id === selectedProject.id \n                          ? { ...p, images, image_count: images.length }\n                          : p\n                      );\n                      setProjects(updatedProjects);\n                    }\n                  }}\n                  maxFiles={20}\n                />\n              )}\n              \n              <div className=\"mt-6 flex justify-center\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setImageModalOpen(false);\n                    setLoadingImages(false);\n                    setSelectedProject(null);\n                    setProjectImages([]);\n                  }}\n                  className=\"bg-gray-500 text-white px-16 py-4 text-content-mobile lg:text-content-desktop font-medium tracking-wider hover:bg-opacity-90 transition-colors\"\n                >\n                  關閉\n                </button>\n              </div>\n            </div>\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    </div>\n  );\n};\n\nexport default AdminProjects;"],"names":["QueryObserver","_a","Subscribable","client","options","__privateAdd","_QueryObserver_instances","_client","_currentQuery","_currentQueryInitialState","_currentResult","_currentResultState","_currentResultOptions","_currentThenable","_selectError","_selectFn","_selectResult","_lastQueryWithDefinedData","_staleTimeoutId","_refetchIntervalId","_currentRefetchInterval","_trackedProps","__privateSet","pendingThenable","__privateGet","shouldFetchOnMount","__privateMethod","executeFetch_fn","updateTimers_fn","shouldFetchOn","clearStaleTimeout_fn","clearRefetchInterval_fn","prevOptions","prevQuery","resolveEnabled","updateQuery_fn","shallowEqualObjects","mounted","shouldFetchOptionally","resolveStaleTime","updateStaleTimeout_fn","nextRefetchInterval","computeRefetchInterval_fn","updateRefetchInterval_fn","query","result","shouldAssignObserverCurrentProperties","onPropTracked","target","key","defaultedOptions","fetchOptions","prevResult","prevResultState","prevResultOptions","queryInitialState","state","newState","isPlaceholderData","data","fetchOnMount","fetchOptionally","fetchState","error","errorUpdatedAt","status","skipSelect","placeholderData","replaceData","selectError","isFetching","isPending","isError","isLoading","hasData","nextResult","isStale","finalizeThenableIfPossible","thenable","recreateThenable","pending","prevThenable","shouldNotifyListeners","notifyOnChangeProps","notifyOnChangePropsValue","includedProps","typedKey","notify_fn","promise","noop","staleTime","isServer","isValidTimeout","timeout","timeUntilStale","nextInterval","focusManager","notifyOptions","notifyManager","listener","shouldLoadOnMount","field","value","observer","optimisticResult","IsRestoringContext","React.createContext","useIsRestoring","React.useContext","createValue","isReset","QueryErrorResetBoundaryContext","useQueryErrorResetBoundary","ensurePreventErrorBoundaryRetry","errorResetBoundary","useClearResetErrorBoundary","React.useEffect","getHasError","throwOnError","suspense","shouldThrowError","ensureSuspenseTimers","clamp","originalStaleTime","args","willFetch","isRestoring","shouldSuspend","fetchOptimistic","useBaseQuery","Observer","queryClient","useQueryClient","_b","isNewCacheEntry","React.useState","shouldSubscribe","React.useSyncExternalStore","React.useCallback","onStoreChange","unsubscribe","_d","_c","_e","useQuery","ArrowsUpDownIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","CloudArrowUpIcon","PencilIcon","PhotoIcon","PlusIcon","StarIcon","XMarkIcon","DynamicFieldManager","fields","onChange","label","placeholder","handleAddField","newField","handleRemoveField","id","handleFieldChange","jsxs","jsx","e","TrashIcon","ProjectImageManager","projectUuid","images","onImagesChange","imageType","maxFiles","uploading","setUploading","useState","uploadProgress","setUploadProgress","selectedImages","setSelectedImages","draggedImage","setDraggedImage","previewImages","setPreviewImages","useEffect","img","handleFileSelect","useCallback","files","toast","newPreviews","file","prev","removePreview","index","handleUpload","p","response","projectService","progress","uploadedCount","failedCount","imagesResponse","handleDelete","imageId","handleSetMain","updatedImages","handleDragStart","handleDragOver","handleDrop","targetId","draggedIndex","targetIndex","newImages","removed","orders","toggleImageSelection","handleBulkDelete","mainImage","galleryImages","preview","Fragment","getImageUrl","image","clsx","getMediumImageUrl","CheckCircleIcon","TagSelector","className","disabled","inputValue","setInputValue","showDropdown","setShowDropdown","selectedTags","setSelectedTags","inputRef","useRef","dropdownRef","tagsData","tagService","availableTags","handleClickOutside","event","handleAddTag","tagName","trimmedTag","newTags","handleRemoveTag","tagToRemove","tag","handleInputKeyDown","handleTagClick","filteredTags","isNewTag","LoadingSpinner","AdminProjects","searchParams","setSearchParams","useSearchParams","projects","setProjects","loading","setLoading","totalPages","setTotalPages","currentPage","setCurrentPage","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","selectedStatus","setSelectedStatus","selectedDisplayPage","setSelectedDisplayPage","showFeaturedOnly","setShowFeaturedOnly","isModalOpen","setIsModalOpen","editingProject","setEditingProject","deleteConfirmId","setDeleteConfirmId","imageModalOpen","setImageModalOpen","selectedProject","setSelectedProject","projectImages","setProjectImages","loadingImages","setLoadingImages","formImages","setFormImages","setNewImages","formData","setFormData","filters","fetchProjects","updateFilters","newFilters","params","handleSearch","handleCreateOrUpdate","mainImageIndex","uploadResponse","uploadedImages","mainIndex","imageError","handleEdit","project","handleToggleFeatured","openCreateModal","MagnifyingGlassIcon","EyeIcon","_","i","page","Dialog","newDisplayPage","updatedFormData","numValue","tags","totalImages","newImageFiles","StarIconSolid","remainingImages","updatedProjects"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]}
# 澤暘建設網站 - 前端部署完整指南

## 📌 重要說明
本指南專為**非技術背景**的部署人員撰寫，包含所有必要步驟的詳細說明。

---

## 🎯 部署目標
將 React 前端網站正確部署到虛擬主機，讓訪客能夠正常瀏覽網站。

---

## 📋 部署前檢查清單

### 需要準備的資訊：
- [ ] FTP 帳號密碼
- [ ] 網站網址（例如：https://zeyanggroup.com.tw）
- [ ] 後端 API 網址（例如：https://zeyanggroup.com.tw/api）
- [ ] 資料庫連線資訊（如果後端也需要部署）

### 需要的軟體工具：
- [ ] FTP 客戶端軟體（FileZilla 或 Cyberduck）
- [ ] 文字編輯器（記事本或 VS Code）
- [ ] 瀏覽器（Chrome 或 Firefox）

---

## 🚀 部署步驟（簡單版）

### 步驟 1：檢查檔案
確認您收到的檔案中包含：
```
frontend/
├── build/           ← 這是最重要的資料夾！
│   ├── index.html   ← 網站入口檔案
│   ├── assets/      ← JavaScript 和 CSS 檔案
│   └── ...
└── public/
    └── images/      ← 網站圖片
```

**重要**：如果沒有 `build` 資料夾，表示前端尚未建置，請聯繫開發人員。

### 步驟 2：設定環境變數
1. 找到 `frontend/.env` 檔案（如果沒有，請建立一個）
2. 用記事本開啟並修改內容：

```env
# === 必須設定的項目 ===
VITE_API_URL=https://zeyanggroup.com.tw/api
# ↑ 請改成您的後端 API 網址

VITE_APP_NAME=澤暘建設
# ↑ 網站名稱

VITE_APP_DESCRIPTION=誠信築基・匠心營造
# ↑ 網站描述
```

### 步驟 3：上傳檔案到 FTP

#### 使用 FileZilla 上傳：

1. **開啟 FileZilla**
2. **連線到 FTP**：
   - 主機：`zeyanggroup.com.tw`（或您的 FTP 主機）
   - 使用者名稱：`您的FTP帳號`
   - 密碼：`您的FTP密碼`
   - 連接埠：`21`
   - 點擊「快速連線」

3. **清理舊檔案**（重要！）：
   - 在右側（遠端站台）找到網站根目錄
   - 刪除舊的 `index.html`、`css/`、`js/` 資料夾
   - **保留** `.htaccess` 檔案（如果有的話）

4. **上傳新檔案**：
   - 左側找到 `frontend/build/` 資料夾
   - 選擇 `build` 資料夾內的**所有檔案**（不是資料夾本身）
   - 拖曳到右側的網站根目錄
   - 等待上傳完成

5. **上傳圖片**：
   - 左側找到 `frontend/public/images/` 資料夾
   - 將整個 `images` 資料夾拖曳到右側

### 步驟 4：設定 .htaccess（重要！）

在網站根目錄建立或修改 `.htaccess` 檔案：

```apache
# === 澤暘建設網站 .htaccess 設定 ===

RewriteEngine On

# 將 API 請求代理到後端
RewriteRule ^api/(.*)$ http://localhost:5001/api/$1 [P,L]

# 檔案上傳路徑代理
RewriteRule ^uploads/(.*)$ http://localhost:5001/uploads/$1 [P,L]

# React Router 支援（單頁應用程式）
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/api
RewriteCond %{REQUEST_URI} !^/uploads
RewriteRule . /index.html [L]
```

---

## 🔍 驗證部署是否成功

### 1. 基本檢查
- 開啟瀏覽器，訪問您的網站
- 應該看到網站首頁，而不是程式碼
- 檢查圖片是否正常顯示

### 2. 進階檢查（按 F12 開啟開發者工具）
- 點擊 Console（控制台）標籤
- 不應該有紅色錯誤訊息
- 如果有錯誤，請截圖記錄

### 3. 功能測試
- [ ] 首頁能正常顯示
- [ ] 可以切換不同頁面
- [ ] 圖片都能正常載入
- [ ] 聯絡表單可以開啟
- [ ] 管理後台登入頁面可以訪問（/admin）

---

## ❌ 常見問題與解決方案

### 問題 1：看到網頁原始碼而非網站
**症狀**：瀏覽器顯示 HTML 程式碼
**原因**：上傳了錯誤的檔案或位置不對
**解決**：
1. 確認上傳的是 `build` 資料夾內的檔案
2. 確認上傳到網站根目錄
3. 清除瀏覽器快取（Ctrl+F5）

### 問題 2：網站一片空白
**症狀**：只看到白色畫面
**原因**：JavaScript 檔案載入失敗
**解決**：
1. 檢查 `assets` 資料夾是否完整上傳
2. 確認 `.htaccess` 設定正確
3. 按 F12 查看 Console 錯誤訊息

### 問題 3：圖片無法顯示
**症狀**：圖片位置顯示破圖
**原因**：圖片路徑錯誤或未上傳
**解決**：
1. 確認 `images` 資料夾已上傳
2. 檢查圖片路徑是否正確
3. 確認圖片檔名大小寫一致

### 問題 4：無法登入管理後台
**症狀**：登入按鈕無反應或顯示錯誤
**原因**：API 連線失敗
**解決**：
1. 確認後端服務已啟動
2. 檢查 `.env` 的 `VITE_API_URL` 設定
3. 確認 CORS 設定允許前端網域

### 問題 5：頁面重新整理出現 404
**症狀**：直接訪問子頁面顯示 404
**原因**：伺服器不認識 React Router 路由
**解決**：
1. 確認 `.htaccess` 已正確設定
2. 檢查 RewriteRule 規則

---

## 📝 環境變數詳細說明

### 必要設定
```env
# API 連線設定（最重要！）
VITE_API_URL=https://zeyanggroup.com.tw/api
# 說明：後端 API 的完整網址
# 注意：結尾不要加斜線 /

# 網站基本資訊
VITE_APP_NAME=澤暘建設
# 說明：顯示在瀏覽器標題的網站名稱

VITE_APP_DESCRIPTION=誠信築基・匠心營造
# 說明：網站的描述文字
```

### 選擇性設定
```env
# Google Maps API（如需地圖功能）
VITE_GOOGLE_MAPS_API_KEY=your-google-maps-api-key
# 說明：如果網站有地圖功能，需要申請 Google Maps API Key

# 其他功能開關
VITE_ENABLE_ANALYTICS=false
# 說明：是否啟用網站分析功能
```

---

## 🔐 安全注意事項

1. **不要將密碼寫在 .env 檔案**
   - `.env` 檔案只用於前端設定
   - 密碼應該只在後端設定

2. **定期更新**
   - 定期檢查是否有新版本
   - 保持備份

3. **檔案權限**
   - 確保上傳的檔案有正確的讀取權限
   - `.env` 檔案不應該被公開訪問

---

## 📦 檔案結構說明

```
網站根目錄/
├── index.html          # 網站入口（React 應用程式）
├── assets/            # JavaScript 和 CSS 檔案
│   ├── index-xxx.js   # 主要程式檔案
│   └── index-xxx.css  # 樣式檔案
├── images/            # 網站圖片
│   ├── about/        # 關於我們頁面圖片
│   ├── project/      # 專案圖片
│   └── ...
├── robots.txt        # 搜尋引擎設定
├── sitemap.xml       # 網站地圖
└── .htaccess         # Apache 伺服器設定
```

---

## 📞 需要協助時提供的資訊

如果遇到問題，請提供：

1. **錯誤截圖**
   - 瀏覽器畫面截圖
   - F12 Console 錯誤訊息

2. **環境資訊**
   - 網站網址
   - 使用的瀏覽器
   - 操作步驟

3. **檔案確認**
   - FTP 上傳的檔案列表截圖
   - `.htaccess` 內容
   - `.env` 內容（隱藏敏感資訊）

---

## ✅ 部署完成檢查表

- [ ] 前端檔案已全部上傳
- [ ] `.env` 已正確設定 API 網址
- [ ] `.htaccess` 已設定
- [ ] 網站首頁可正常訪問
- [ ] 圖片正常顯示
- [ ] 可以切換不同頁面
- [ ] 管理後台登入頁面可訪問
- [ ] 瀏覽器 Console 無錯誤訊息
- [ ] 已清除瀏覽器快取測試
- [ ] 已在不同瀏覽器測試

---

**文件版本**: 1.0.0  
**更新日期**: 2025-08-22  
**適用對象**: 非技術背景的部署人員